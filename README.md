<h1 align="center">🚀 MarketFlex - FrontEnd</h1>
<p align="center">
  <img src="./public/logo-marketflex-circle.png" alt="MarketFlex Logo" width="150" height="150">
</p>

<p align="center">
    <a href="https://github.com/agussantinelli/MarketFlex-FrontEnd" target="_blank">
        <img src="https://img.shields.io/badge/🚀%20Repo%20Frontend%20(Estás%20Aquí)-Astro-BC52EE?style=for-the-badge&logo=astro&logoColor=white" alt="Frontend Repo Badge"/>
    </a>
    <a href="https://github.com/agussantinelli/MarketFlex-BackEnd" target="_blank">
        <img src="https://img.shields.io/badge/⚙️%20Repo%20Backend-Node.js%20%26%20Hono-E0234E?style=for-the-badge&logo=hono&logoColor=white" alt="Backend Repo Badge"/>
    </a>
    <a href="https://github.com/agussantinelli" target="_blank">
        <img src="https://img.shields.io/badge/👤%20Contacto-agussantinelli-000000?style=for-the-badge&logo=github&logoColor=white" alt="Contact Badge"/>
    </a>
</p>

<div align="center">
    <img src="https://img.shields.io/badge/Astro-5.17.1-BC52EE?style=for-the-badge&logo=astro&logoColor=white" alt="Astro Badge">
    <img src="https://img.shields.io/badge/React-19.2.4-61DAFB?style=for-the-badge&logo=react&logoColor=white" alt="React Badge">
    <img src="https://img.shields.io/badge/Sileo-0.1.1-FFD700?style=for-the-badge&logo=vlc&logoColor=black" alt="Sileo Badge">
    <img src="https://img.shields.io/badge/TypeScript-5.9.3-3178C6?style=for-the-badge&logo=typescript&logoColor=white" alt="TS Badge">
    <img src="https://img.shields.io/badge/OpenAPI-Consuming-6BA539?style=for-the-badge&logo=openapiinitiative&logoColor=white" alt="OpenAPI Badge">
    <img src="https://img.shields.io/badge/Zustand-5.0.11-764ABC?style=for-the-badge&logo=zustand&logoColor=white" alt="Zustand Badge">
    <img src="https://img.shields.io/badge/Nanostores-1.1.0-3178C6?style=for-the-badge&logo=atom&logoColor=white" alt="Nanostores Badge">
    <img src="https://img.shields.io/badge/pnpm-10+-F69220?style=for-the-badge&logo=pnpm&logoColor=white" alt="pnpm Badge">
    <img src="https://img.shields.io/badge/Ky-1.14.3-FF4081?style=for-the-badge&logo=ky&logoColor=white" alt="Ky Badge">
    <img src="https://img.shields.io/badge/Lucide_Icons-0.575.0-F56565?style=for-the-badge&logo=lucide&logoColor=white" alt="Lucide Badge">
    <img src="https://img.shields.io/badge/React_Icons-5.5.0-E91E63?style=for-the-badge&logo=react&logoColor=white" alt="React-Icons Badge">
    <img src="https://img.shields.io/badge/Google_Sign--In-GSI-4285F4?style=for-the-badge&logo=google&logoColor=white" alt="Google Sign-In Badge">
    <img src="https://img.shields.io/badge/Facebook_Login-SDK-1877F2?style=for-the-badge&logo=facebook&logoColor=white" alt="Facebook Login Badge">
    <img src="https://img.shields.io/badge/Recharts-3.7.0-22B573?style=for-the-badge&logo=recharts&logoColor=white" alt="Recharts Badge">
    <img src="https://img.shields.io/badge/ApexCharts-5.6.0-008FFB?style=for-the-badge&logo=apexcharts&logoColor=white" alt="ApexCharts Badge">
    <img src="https://img.shields.io/badge/Chart.js-4.5.1-FF6384?style=for-the-badge&logo=chartdotjs&logoColor=white" alt="Chart.js Badge">
    <img src="https://img.shields.io/badge/JWT-Auth-black?style=for-the-badge&logo=jsonwebtokens&logoColor=white" alt="JWT Badge">
    <img src="https://img.shields.io/badge/reCAPTCHA-v3-4285F4?style=for-the-badge&logo=google&logoColor=white" alt="reCAPTCHA Badge">
    <img src="https://img.shields.io/badge/HTTPS-mkcert-003666?style=for-the-badge&logo=letsencrypt&logoColor=white" alt="mkcert Badge">
    <img src="https://img.shields.io/badge/Vite-6.x-646CFF?style=for-the-badge&logo=vite&logoColor=white" alt="Vite Badge">
    <img src="https://img.shields.io/badge/Vitest-4.0.18-6E9F18?style=for-the-badge&logo=vitest&logoColor=white" alt="Vitest Badge">
    <img src="https://img.shields.io/badge/MSW-2.x-FF6A00?style=for-the-badge&logo=mockserviceworker&logoColor=white" alt="MSW Badge">
    <img src="https://img.shields.io/badge/Playwright-1.58.2-2EAD33?style=for-the-badge&logo=playwright&logoColor=white" alt="Playwright Badge">
    <img src="https://img.shields.io/badge/Test_Enforcement-Mandatory-orange?style=for-the-badge&logo=vitest&logoColor=white" alt="Test Enforcement Badge">
</div>

<div align="center">
    <a href="https://drive.google.com/drive/folders/1qDvPJkxC14DdE-JEqHtvR_LL-ULDbvRL" target="_blank">
        <img src="https://img.shields.io/badge/📂%20Drive%20Documentación-4285F4?style=for-the-badge&logo=googledrive&logoColor=white" alt="Drive Docs Badge"/>
    </a>
</div>

<div align="center">
  <img src="https://img.shields.io/badge/Copyright-All_Rights_Reserved-red?style=for-the-badge&logo=copyright&logoColor=white" alt="Copyright Badge"/>
</div>
<hr>

<h2>🌀 El Factor Flex: Adaptabilidad Sin Límites</h2>
<p align="center">
  <i>"Un solo núcleo, infinitas posibilidades."</i>
</p>
<p>
  Lo más importante de <b>MarketFlex</b> es su capacidad de metamorfosis. La arquitectura está diseñada para que la interfaz pueda ser adaptada a <b>marketplaces con orientaciones completamente distintas</b> sin reescribir la lógica base. 
  <br><br>
  Desde un retail de moda hasta una plataforma de servicios profesionales o un mercado de coleccionables digitales; la UI se amolda a la naturaleza del producto.
</p>


<hr>

<h2>🛠️ Stack Tecnológico</h2>
<table>
    <thead>
        <tr>
            <th>Capa / Área</th>
            <th>Tecnología</th>
            <th>Versión / Detalle</th>
            <th>Uso Principal</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Runtime</strong></td>
            <td>Node.js</td>
            <td><strong>20+</strong> (LTS)</td>
            <td>Entorno de ejecución y construcción del proyecto.</td>
        </tr>
        <tr>
            <td><strong>Framework</strong></td>
            <td>Astro</td>
            <td><strong>^5.17.1</strong></td>
            <td>Arquitectura de islas, rendimiento y routing.</td>
        </tr>
        <tr>
            <td><strong>Lenguaje</strong></td>
            <td>TypeScript</td>
            <td><strong>^5.9.3</strong></td>
            <td>Tipado estricto para componentes y lógica de negocio.</td>
        </tr>
        <tr>
            <td><strong>Estilos</strong></td>
            <td>CSS Modules (Scoped)</td>
            <td>.module.css</td>
            <td>Estilizado modular con aislamiento automático por componente.</td>
        </tr>
        <tr>
            <td><strong>E2E Testing</strong></td>
            <td>Playwright</td>
            <td><strong>^1.58.2</strong></td>
            <td>Pruebas de punta a punta en navegadores reales.</td>
        </tr>
        <tr>
            <td><strong>Unit Testing</strong></td>
            <td>Vitest</td>
            <td><strong>^4.0.18</strong></td>
            <td>Pruebas unitarias ultrarrápidas para servicios.</td>
        </tr>
        <tr>
            <td><strong>Mocking</strong></td>
            <td>MSW (Mock Service Worker)</td>
            <td><strong>^2.12.10</strong></td>
            <td>Intercepción de red para pruebas deterministas.</td>
        </tr>
        <tr>
            <td><strong>Component Testing</strong></td>
            <td>React Testing Library</td>
            <td><strong>^16.3.2</strong></td>
            <td>Pruebas de comportamiento para componentes React.</td>
        </tr>
        <tr>
            <td><strong>Dependency Manager</strong></td>
            <td>pnpm</td>
            <td><strong>Latest</strong></td>
            <td>Gestión de dependencias eficiente y veloz.</td>
        </tr>
        <tr>
            <td><strong>Componentes</strong></td>
            <td>Astro Components</td>
            <td>.astro</td>
            <td>Componentes de servidor (SSR/SSG) por defecto.</td>
        </tr>
        <tr>
            <td><strong>Integración</strong></td>
            <td>Ky</td>
            <td><strong>^1.14.3</strong></td>
            <td>Consumo de la API Backend (ligero y moderno).</td>
        </tr>
        <tr>
            <td><strong>Iconos</strong></td>
            <td>astro-icon, Lucide & react-icons</td>
            <td><strong>^1.1.5 / ^0.575.0 / ^5.5.0</strong></td>
            <td>Iconografía SVG optimizada, librerías modernas para React y animaciones.</td>
        </tr>
        <tr>
            <td><strong>Visualización</strong></td>
            <td>Recharts, ApexCharts & Chart.js</td>
            <td><strong>^3.7.0 / ^5.6.0 / ^4.5.1</strong></td>
            <td>Gráficos dinámicos y reportes administrativos interactivos.</td>
        </tr>
        <tr>
            <td><strong>Tipografía</strong></td>
            <td>@fontsource/inter</td>
            <td><strong>^5.2.8</strong></td>
            <td>Gestión de fuentes local (sin llamadas externas).</td>
        </tr>
        <tr>
            <td><strong>Notificaciones</strong></td>
            <td>Sileo</td>
            <td><strong>^0.1.1</strong></td>
            <td>Sistema de avisos visuales con efectos "gooey".</td>
        </tr>
        <tr>
            <td><strong>UI Framework</strong></td>
            <td>React</td>
            <td><strong>^19.2.4</strong></td>
            <td>Soporte para componentes interactivos y librerías externas.</td>
        </tr>
        <tr>
            <td><strong>DX Tools</strong></td>
            <td>Astro Check</td>
            <td><strong>^0.9.6</strong></td>
            <td>Validación estática y visualización de errores de Astro.</td>
        </tr>
        <tr>
            <td><strong>Auth Social</strong></td>
            <td>Google Sign-In (GSI)</td>
            <td><strong>Latest</strong></td>
            <td>Inicio de sesión con cuenta de Google (Identity Services).</td>
        </tr>
        <tr>
            <td><strong>Auth Social</strong></td>
            <td>Facebook Login SDK</td>
            <td><strong>v21.0</strong></td>
            <td>Inicio de sesión con cuenta de Facebook (JS SDK).</td>
        </tr>
        <tr>
            <td><strong>Seguridad</strong></td>
            <td>JWT & Refresh Tokens</td>
            <td><strong>Auto-Refresh</strong></td>
            <td>Renovación automática de sesión interceptada vía Ky.</td>
        </tr>
        <tr>
            <td><strong>Anti-Bot</strong></td>
            <td>reCAPTCHA v3</td>
            <td><strong>Invisible</strong></td>
            <td>Protección automática contra bots sin fricción para el usuario.</td>
        </tr>
        <tr>
            <td><strong>Herramientas</strong></td>
            <td>vite-plugin-mkcert</td>
            <td><strong>^1.17.9</strong></td>
            <td>Generación de certificados SSL (HTTPS Local) para OAuth.</td>
        </tr>
        <tr>
            <td><strong>State Management</strong></td>
            <td>Zustand & Nanostores</td>
            <td><strong>^5.0.11 / ^1.1.0</strong></td>
            <td>Gestión de estado global para React Islands y compartida entre frameworks (Astro/React).</td>
        </tr>
    </tbody>
</table>

<hr>

<h2>📦 Características Principales</h2>
<ul>
  <li>📊 <b>Admin Dashboard (Data-Driven):</b> Panel interactivo con métricas reales y visualizaciones de tendencias mediante el componente `StatTable`, permitiendo una gestión eficiente de ventas e ingresos.</li>
  <li>🛡️ <b>Ecosistema de Vistas Binarias:</b> Sistema inteligente que alterna entre el entorno de Administrador y Cliente con transiciones fluidas y limpieza de estados persistentes.</li>
  <li>🛒 <b>Experiencia de Carrito Premium:</b> Diseño basado en *Glassmorphism* de alta densidad con micro-animaciones, controles de cantidad tipo pildora y gestión de estado atomizada mediante Nanostores.</li>
  <li>🛍️ <b>Checkout Multi-Sección & Fluid:</b> Proceso de compra dividido en fases lógicas (Personal, Envío, Pago) con validación en tiempo real y auto-completado inteligente.</li>
  <li>🌙 <b>Dark Mode Nativo (High-End):</b> Implementación de tema oscuro profundo con efectos de desenfoque y transparencias que realzan la estética neón oficial de MarketFlex.</li>
  <li>🏝️ <b>Arquitectura de Islas (Astro):</b> Hidratación selectiva de componentes React solo cuando es necesario, garantizando tiempos de carga ínfimos y un rendimiento excepcional.</li>
  <li>🔍 <b>Sistema de Filtrado Editorial:</b> Buscador avanzado con filtros multi-selección, persistencia en URL y soporte para claves fijas (`fixedKeys`) en contextos específicos.</li>
  <li>🧮 <b>Motor de Descuentos Sincronizado:</b> Lógica de promociones NxM (3x2, 2x1) calculada en el cliente con precisión absoluta respecto a las reglas del backend.</li>
  <li>🧪 <b>100% Logic Coverage:</b> Suite robusta de <b>181 tests unitarios</b> que cubren el 100% de la lógica de servicios, scripts, utilidades de imagen y estados globales.</li>
  <li>🔄 <b>Invalidación de Cache Inteligente:</b> Detección automática de re-seeds en la base de datos para forzar la limpieza del `localStorage`, evitando errores de inconsistencia de datos.</li>
  <li>📱 <b>Responsive Design de Alta Densidad:</b> Interfaz optimizada meticulosamente para dispositivos móviles, escalando sin pérdida de estética o funcionalidad a pantallas de escritorio.</li>
  <li>🔒 <b>Seguridad & Anti-Bot:</b> Integración profunda con JWT (Auto-Refresh), Google reCAPTCHA v3 e HTTPS local garantizado mediante certificados confiables.</li>
  <li>⚡
 <b>Navbar Inteligente (Contextual):</b> Navegación jerárquica con subcategorías anidadas, triggers de flecha y sistema de *hover delay* (2s) para una navegación fluida.</li>
  <li>🎡 <b>Componentes Visuales Premium:</b> Carruseles interactivos con estados dinámicos, badges sociales oficiales y micro-interacciones neón en toda la UI.</li>
  <li>✨ <b>Páginas de Contexto Curado:</b> Secciones dedicadas para Novedades (`/new-arrivals`) y Ofertas (`/offers`) con filtros pre-configurados y navegación optimizada.</li>
  <li>🛡️ <b>Mocking de API (MSW):</b> Integración con Mock Service Worker para simular respuestas del backend en tests unitarios, permitiendo pruebas deterministas de interceptores y flujo de tokens.</li>
</ul>
  
<hr>

<h2>📊 Analytics Performance Platform</h2>
<p align="center">
  <i>"Donde los datos se transforman en decisiones estratégicas."</i>
</p>
<p>
  MarketFlex integra un motor de analíticas de alto rendimiento diseñado para ofrecer una visión 360° del ecosistema de ventas. Esta plataforma no se limita a mostrar datos; utiliza una arquitectura de <b>Tres Motores de Visualización</b> para adaptar cada métrica a su formato de lectura más eficiente:
</p>

<table>
    <thead>
        <tr>
            <th>Dashboard</th>
            <th>Motor Visual</th>
            <th>Propósito Técnico</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Evolución de Ventas</b></td>
            <td><b>Recharts</b></td>
            <td>Áreas suavizadas con gradientes neón para visualización de tendencias de ingresos (12 meses).</td>
        </tr>
        <tr>
            <td><b>Distribución de Categorías</b></td>
            <td><b>Chart.js</b></td>
            <td>Gráficos circulares reactivos con cálculos porcentuales automáticos y leyendas dinámicas.</td>
        </tr>
        <tr>
            <td><b>Rendimiento por Marcas</b></td>
            <td><b>ApexCharts</b></td>
            <td>Top 10 marcas con mayores ingresos brutos (Barras Horizontales).</td>
        </tr>
        <tr>
            <td><b>Métodos de Pago</b></td>
            <td><b>Chart.js</b></td>
            <td>Distribución de ingresos según el medio de pago (Tarjeta, Efectivo, Transferencia).</td>
        </tr>
        <tr>
            <td><b>Mapa de Calor de Ventas</b></td>
            <td><b>ApexCharts</b></td>
            <td>Análisis de densidad por día/hora (Últimos 30 días) para identificar picos de demanda.</td>
        </tr>
    </tbody>
</table>

<h3>🚀 Características de la Plataforma Analytics</h3>
<ul>
    <li><b>Arquitectura Zero-Delay:</b> Consumo directo de la API mediante Ky con tipado estricto para una respuesta instantánea.</li>
    <li><b>Visualización Neo-Dark:</b> Diseño optimizado para el tema oscuro con tooltips translúcidos y efectos de desenfoque.</li>
    <li><b>Detección de Métricas Clave:</b> Cálculo en tiempo real de ingresos liquidados, volumen por categoría y engagement de marca.</li>
    <li><b>Mini-Modales Informativos:</b> Sistema de iconos `(i)` que despliegan modales centrados con la explicación técnica de cada indicador (Ratio de Conversión, Recurrencia, etc.).</li>
    <li><b>Formatos Inteligentes:</b> Localización dinámica de moneda (ARS) y ajuste de zona horaria (ART) para una precisión absoluta en el mercado local.</li>
</ul>

<hr>

<h2>🎨 Experiencia Visual y Filosofía de Diseño</h2>
<p>
  La interfaz de MarketFlex no es solo estética; es una declaración de principios sobre cómo debe sentirse una aplicación moderna de alta gama. Hemos fusionado un rendimiento extremo con un acabado visual que denominamos <b>"Neo-Premium"</b>.
</p>
<ul>
  <li><b>Glassmorphism de Alta Densidad:</b> Uso extensivo de desenfoques de fondo (backdrop-filter) y bordes translúcidos con brillos sutiles que generan una sensación de profundidad y capas reales.</li>
  <li><b>Estética Neón & Dark Mode:</b> El modo oscuro es nativo y prioritario, utilizando una paleta de contrastes altos con acentos neón que guían la mirada del usuario hacia los puntos de acción (CTA).</li>
  <li><b>Micro-animaciones de Estado:</b> Cada interacción (un hover en el Navbar, una eliminación del carrito, una rotación de flecha) está acompañada de transiciones suaves de 0.2s - 0.3s que refuerzan la sensación de fluidez y reactividad.</li>
  <li><b>Feedback Visual Gooey (Sileo):</b> Las notificaciones y alertas utilizan efectos de "viscosidad" visual (Gooey effect) para dar una sensación orgánica y moderna lejos de los popups convencionales.</li>
  <li><b>Diseño Fluid & Mobile-First:</b> La experiencia en dispositivos móviles está tratada como una prioridad. Patrones de layout <i>grid/flexbox</i> dinámicos adaptan desde la grilla de productos hasta el panel del carrito de compras para mantener la elegancia y operabilidad táctil usando una sola mano.</li>
</ul>

<hr>

<h2>👁️ Sistema de Vistas Binarias (Administrador)</h2>
<p>Para simplificar y optimizar la experiencia de gestión técnica, MarketFlex implementa un sistema robusto de <b>Vistas Binarias</b> gestionado vía <code>localStorage</code> (<code>marketflex_admin:isAdminMode</code>) encapsulado en el menú de usuario. El comportamiento para las cuentas con el rol <code>admin</code> es el siguiente:</p>
<ul>
    <li><b>Landing por Defecto (Panel de Administración):</b> Todo inicio de sesión de administrador activa el modo admin por defecto y redirige inmediata y automáticamente a <code>/admin/dashboard</code>. El administrador aterriza en su área de trabajo orientada a métricas de forma fluida.</li>
    <li><b>Vista Cliente:</b> Estando en el panel, el menú desplegable del perfil superior expone un botón dedicado llamado <b>"Cambiar a Vista Cliente"</b>. Al accionarlo, el estado administrativo se pausa temporalmente (<code>isAdminMode="false"</code>), redirigiendo al usuario a la ruta raíz (<code>/</code>). Esto permite navegar y auditar la tienda (productos, carritos, promociones) exactamente como un usuario estándar.</li>
    <li><b>Retorno al Panel de Administración:</b> Mientras se audita la "Vista Cliente", el menú inteligente reestructura sus opciones: expone el botón <b>"Cambiar al Panel Administrador"</b> y las rutas típicas de cliente. Al accionarlo, se restaura el entorno administrativo devolviendo al staff a sus métricas con un clic y cerrando el ciclo.</li>
</ul>

<hr>

<h2>🏝️ Arquitectura de Componentes (Astro Islands)</h2>
<p>Este proyecto exhibe un rendimiento excepcional gracias a la implementación nativa y rigurosa de la <b>Arquitectura de Islas de Astro</b>. El patrón de diseño se estructura en las siguientes directrices operativas:</p>
<ul>
  <li><b>Esqueleto y Estructura (Astro Puro):</b> La inmensa mayoría de la UI (Barra de Navegación, Pie de Página, Tarjetas de Producto, Grillas y Formularios Estáticos) se renderiza en el servidor vía componentes <code>.astro</code>. Esto expone un HTML súper ligero con cero JavaScript bloqueante.</li>
  <li><b>Micro-Aislamiento Reactivo (React Islands):</b> Únicamente los componentes que exigen interactividad de alta frecuencia, re-renderizado condicional o gestión de estado compleja se construyen como Islas de React. Ejemplos críticos de esto son: <code>&lt;CartView client:load /&gt;</code>, los flujos multi-paso de <code>&lt;CheckoutForm client:idle /&gt;</code>, el tablero interactivo <code>&lt;DashboardView client:only="react" /&gt;</code> y el sistema visual <code>&lt;Notifications /&gt;</code>.</li>
  <li><b>Scripts Locales (Vanilla TypeScript):</b> Para interactividad ligera que no justifica importar React (ej., abrir menús superpuestos, manejar carruseles o peticiones de login), se emplea JavaScript/TypeScript vainilla encapsulado en etiquetas <code>&lt;script&gt;</code> y abstraído físicamente en la carpeta <code>src/scripts/</code>, manteniendo el DOM libre de Virtual DOM overhead.</li>
  <li><b>Estilos Scoped (CSS Modules):</b> Siguiendo la skill de la arquitectura, cualquier CSS propio de un componente aislado se desarrolla mediante <code>.module.css</code>; asegurando que las reglas de diseño jamás colisionen fuera del ámbito de esa Isla o componente.</li>
</ul>

<hr>

<h2>🌐 Flujo de Datos y Consumo de API</h2>
<p>La comunicación con el backend se gestiona de forma robusta e interceptada utilizando <b>Ky</b>. Toda la configuración del cliente HTTP reside centralizada en <code>src/lib/api.ts</code>, garantizando un comportamiento predictible para todos los <code>services</code>.</p>
<ul>
  <li><b>Intercepción de Salida (JWT Injector):</b> El hook <code>beforeRequest</code> inyecta automáticamente el <code>marketflex_token</code> (Bearer) en los headers de toda petición saliente, exceptuando de forma inteligente las rutas públicas de autenticación (<code>/auth/</code>) para evitar colisiones.</li>
  <li><b>Intercepción de Entrada (Auto-Refresh):</b> Un hook <code>afterResponse</code> vigila por errores <code>401 Unauthorized</code>. Si ocurren, el cliente pausa la ejecución, solicita transparentemente un nuevo par de tokens usando el <code>marketflex_refresh_token</code>, reescribe el localStorage y reintenta la petición original (clonada) sin que el usuario lo note o pierda su contexto (e.g. llenar un carrito).</li>
  <li><b>Manejo Global de Errores (Sileo Linked):</b> El mismo interceptor evalúa cualquier respuesta fallida (`!response.ok`), extrae el mensaje de error normalizado provisto por el backend, lo mapea usando un diccionario de errores amigables (e.g. <code>insufficient stock</code> → "Stock insuficiente para uno o más productos") y lo dispara directamente a la UI llamando a <code>window.triggerSileo('error', ...)</code>, centralizando así el feedback visual sin tener que rodear cada llamada de servicio en bloques `try/catch` manuales.</li>
</ul>

<hr>

<h2>🔔 Manejo de Estados y Notificaciones</h2>
<p>Dada la arquitectura híbrida de Astro, la gestión del estado se divide estratégicamente según el contexto y el alcance temporal de los datos, garantizando rendimiento y reactividad instantánea:</p>
<ul>
  <li><b>Zustand (Micro-Estados Complejos):</b> Se utiliza para manejar el estado altamente interactivo y persistente de características críticas del lado del cliente, como el <code>cartStore</code> y el <code>checkoutStore</code>. Al ser ágil y libre de boilerplate, permite sincronizar las React Islands encargadas de las compras con <code>localStorage</code> sin esfuerzo.</li>
  <li><b>Nanostores (Puente Multi-Framework):</b> Utilizado primordialmente en utilidades como <code>adminStore</code>. Su naturaleza agnóstica al framework facilita cruzar la frontera de hidratación, permitiendo que tanto el código estático (Astro vanilla) como el interactivo (React) lean y muten el mismo estado base.</li>
  <li><b>Query Parameters (Estado Transitorio):</b> Para flujos de navegación que no ameritan un store en memoria (ej. informar si un Login fue exitoso), el sistema sigue confiando fuertemente en URLs limpias (ej. <code>?login_success=true&user=...</code>).</li>
  <li><b>Sistema Global de Notificaciones (Sileo):</b> Lejos de atar las notificaciones visuales al Virtual DOM completo, la app cuenta con un único listener global de Sileo. Todos los scripts estáticos, páginas Astro o interceptores de API pueden invocar un popup visual moderno simplemente ejecutando <code>window.triggerSileo('success' | 'error', mensaje)</code> sin depender de React Context o grandes proveedores globales.</li>
</ul>

<hr>

<h2>📑 Sistema de Paginación</h2>
<p>El marketplace utiliza un avanzado sistema de paginación renderizado en servidor (SSR) basado intrínsecamente en la URL. Esto garantiza indexación SEO perfecta, que los usuarios no pierdan su estado y puedan compartir enlaces directos a resultados específicos.</p>
<ul>
    <li><b>Generación Dinámica (Astro):</b> La paginación extrae parámetros complejos (como <code>?q=...&category=...&minPrice=...</code>) y los clona automáticamente al generar los links HTTP de tipo <code>&lt;a href="..."&gt;</code> para las páginas colindantes, asegurando una <i>Navegación Persistente</i> donde jamás perdés tus filtros activos.</li>
    <li><b>Metadatos Precisos:</b> Bloque informativo de ubicación renderizando el rango y recuento exacto devuelto por la API. (Ej: <i>"Página <b>2</b> de <b>10</b>, viendo los productos <b>21-40</b> de <b>200</b>"</i>).</li>
    <li><b>UI Premium Glassmorphism:</b> Estructurado internamente en dos bloques semánticos (<code>.paginationControls</code> y <code>.paginationPages</code>) que interactúan con media queries:
        <ul>
            <li><b>Desktop:</b> Despliega la barra horizontal completa ofreciendo salto directo a páginas numéricas y botones perimetrales con iconos <i>Lucide</i>.</li>
            <li><b>Mobile:</b> El diseño colapsa inteligentemente la matriz numérica, dándole preponderancia visual a los botones táctiles adyacentes ("Anterior / Siguiente") para prevenir toques fantasma o errores de dedo.</li>
        </ul>
    </li>
</ul>

<hr>

<h2>🔐 Seguridad y Autenticación</h2>
<p>
  El sistema implementa sólidas capas de seguridad, gestionadas a través del script unificado <code>auth-login.ts</code>, que centraliza toda la lógica de sesión:
</p>
<ul>
  <li>
    <b>Sesiones Persistentes (Refresh Tokens):</b> Manejo seguro de sesiones duales. El <code>marketflex_token</code> (Access Token) se utiliza para peticiones, mientras que el <code>marketflex_refresh_token</code> permite renovar la sesión de forma transparente (vía el interceptor de Ky) sin requerir re-logueos. La metadata (nombre, rol) se cachea en <code>marketflex_user</code>.
  </li>
  <li>
    <b>Autenticación Clásica (Email/Password):</b> Formulario tradicional protegido, integrando transiciones visuales, checkboxes de "Recordar Email" (persistido en localStorage) y feedback de errores de servidor parseados directamente a notificaciones "Gooey" en pantalla mediante Sileo.
  </li>
  <li>
    <b>Login Social — Google GSI:</b> Integración con la librería moderna <b>Google Identity Services</b>. El botón se renderiza de manera nativa utilizando la API <code>google.accounts.id.renderButton</code> y se re-dibuja dinámicamente mediante un <code>ResizeObserver</code> para preservar proporciones visuales perfectas. Tras un callback exitoso, la aserción JWT de Google es validada unívocamente en el backend.
  </li>
  <li>
    <b>Login Social — Facebook OAuth (Redirect Flow):</b> En lugar de depender de pesados y problemáticos popups del SDK mediante <code>FB.login</code>, la plataforma utiliza el <b>Flujo Directo de Redirección OAuth</b>. Al hacer click, el usuario viaja a Facebook, y al autorizar, MarketFlex captura el <code>?code=</code> directamente en la ruta de origen, procesándolo <i>silentamente</i> por detrás mientras se delega la obtención del token definitivo al backend (Auth Code Exchange), minimizando bloqueos por parte del navegador.
  </li>
  <li>
    <b>HTTPS en Desarrollo:</b> Uso de <code>vite-plugin-mkcert</code> para generar una Autoridad Certificadora (CA) local y certificados confiables. Esto elimina la advertencia de "Conexión no privada" en el navegador y es un requisito estricto para probar configuraciones complejas de cookies <code>Secure</code> o probar el redirect de Facebook localmente sin fallos.
  </li>
</ul>

<hr>

<h2>📁 Estructura del Proyecto</h2>

<pre><code>MarketFlex-FrontEnd/
├── .agent/                                         # Configuración del asistente y sus capacidades.
│   ├── skills/                                     # Guías de arquitectura y desarrollo del proyecto.
│   └── workflows/                                  # Automatización de tareas complejas (Tests, E2E).
├── .github/                                        # Ajustes de GitHub y CI/CD global.
│   └── workflows/                                  # Definición de pipelines automatizados.
│       └── frontend-tests.yml                      # Ejecución de tests unitarios y suite Playwright.
├── .astro/                                         # Archivos temporales de compilación de Astro.
├── public/                                         # Activos estáticos servidos directamente (Iconos, Font).
│   ├── background/                                 # Galería de texturas térmicas y fondos premium.
│   ├── logos/                                      # Branding oficial y logotipos sociales.
│   └── ...                                         # Isotipos y recursos gráficos adicionales.
├── src/                                            # Núcleo del frontend de la aplicación.
│   ├── components/                                 # Componentes reutilizables (Arquitectura de Islas).
│   │   ├── admin/                                  # Componentes para el panel de administración.
│   │   │   ├── AdminHeader.astro                   # Barra superior administrativa con buscador y usuario.
│   │   │   ├── AdminSidebar.test.tsx               # Test de renderizado y lógica del sidebar.
│   │   │   ├── AdminSidebar.tsx                    # Navegación lateral principal panel privado.
│   │   │   ├── AnalyticsView.test.tsx              # Pruebas de la vista de analíticas.
│   │   │   ├── AnalyticsView.tsx                   # Vista de gráficos y reportes de ventas (React).
│   │   │   ├── DashboardView.test.tsx              # Pruebas del panel interactivo.
│   │   │   ├── DashboardView.tsx                   # Vista principal de métricas y ventas (React).
│   │   │   ├── DataTable.test.tsx                  # Test unitario del componente de tabla universal.
│   │   │   ├── DataTable.tsx                       # Tabla reutilizable y personalizable para CRUDs.
│   │   │   ├── ProductsListView.test.tsx           # Test integral de la gestión de productos.
│   │   │   ├── ProductsListView.tsx                # Vista de administración del catálogo de productos.
│   │   │   ├── StatTable.test.tsx                  # Pruebas de la tabla de estadísticas administrativas.
│   │   │   ├── StatTable.tsx                       # Componente reactivo para listar métricas en detalle.
│   │   │   ├── UserListView.test.tsx               # Pruebas de la tabla de usuarios.
│   │   │   ├── UserListView.tsx                    # Componente reactivo para listar usuarios.
│   │   │   └── styles/                             # Módulos CSS administrativos.
│   │   │       ├── AdminHeader.module.css          # Estilos de la barra de navegación superior.
│   │   │       ├── AdminSidebar.module.css         # Estilos del menú lateral.
│   │   │       ├── dashboard.module.css            # Estilos dedicados del dashboard.
│   │   │       └── DataTable.module.css            # Estilos premium para la tabla universal.
│   │   ├── auth/                                   # UI de login, registro y validación social.
│   │   │   ├── AuthInputs.astro                    # Inputs estandarizados para formularios auth.
│   │   │   ├── Captcha.astro                       # Integración visual de Google reCAPTCHA v3.
│   │   │   └── styles/                             # Módulos CSS específicos de auth.
│   │   │       └── AuthInputs.module.css           # Estilos de los inputs de autenticación.
│   │   ├── cart/                                   # Gestión visual del carrito de compras.
│   │   │   ├── CartView.test.tsx                   # Test del panel interactivo de carrito.
│   │   │   ├── CartView.tsx                        # UI de gestión de ítems y totales (React).
│   │   │   └── styles/                             # Estilos modulares del carrito.
│   │   │       └── CartView.module.css             # Diseño premium del panel lateral de compra.
│   │   ├── checkout/                               # Flujo final de transacción.
│   │   │   ├── CheckoutForm.test.tsx               # Test de validación del formulario de pago.
│   │   │   ├── CheckoutForm.tsx                    # Formulario multi-paso de envío (React).
│   │   │   ├── CheckoutSummary.test.tsx            # Test del cálculo de totales finales.
│   │   │   ├── CheckoutSummary.tsx                 # Resumen de orden y descuentos aplicados (React).
│   │   │   └── styles/                             # Estilos del flujo de checkout.
│   │   │       ├── CheckoutForm.module.css         # Diseño del formulario de facturación.
│   │   │       └── CheckoutSummary.module.css      # Estética del resumen lateral de orden.
│   │   ├── common/                                 # Componentes transversales del sistema.
│   │   │   ├── ConfirmationModal.astro             # Ventana emergente de confirmación UI.
│   │   │   ├── LoadingSpinner.test.tsx             # Test del componente de carga global.
│   │   │   ├── LoadingSpinner.tsx                  # Animación premium de espera asíncrona.
│   │   │   ├── Notifications.test.tsx              # Test del sistema de avisos Sileo.
│   │   │   ├── Notifications.tsx                   # UI de notificaciones estilo push interactiva.
│   │   │   ├── PageCard.astro                      # Contenedor Glassmorphism para vistas centradas.
│   │   │   └── styles/                             # Estilos comunes modulares.
│   │   │       ├── ConfirmationModal.module.css    # Diseño del modal de confirmación.
│   │   │       ├── LoadingSpinner.module.css       # Animación neón del spinner.
│   │   │       └── PageCard.module.css             # Estética Glassmorphism de las tarjetas.
│   │   ├── products/                               # Dominio del catálogo de productos.
│   │   │   ├── ActiveFilters.astro                 # Tags interactivos de filtrado activo.
│   │   │   ├── AddToCartButton.test.tsx            # Test del botón de acción principal.
│   │   │   ├── AddToCartButton.tsx                 # Lógica de adición al carrito (React).
│   │   │   ├── AddToCartModal.test.tsx             # Test del modal de éxito de adición.
│   │   │   ├── AddToCartModal.tsx                  # Modal transicional de producto añadido (React).
│   │   │   ├── FeaturedProducts.astro              # Grilla de destacados para el home.
│   │   │   ├── FilterButton.astro                  # Disparador del modal de filtros neón.
│   │   │   ├── FilterModal.astro                   # Panel de filtrado avanzado por marcas/precio.
│   │   │   ├── ProductCard.astro                   # Tarjeta individual con efectos térmicos.
│   │   │   ├── ProductCarousel.astro               # Motor de carrusel interactivo neón.
│   │   │   ├── ProductControls.astro               # Barra de ordenamiento y visualización.
│   │   │   ├── SortSelect.astro                    # Selector de ordenamiento selectivo.
│   │   │   └── styles/                             # Estilos del dominio de productos.
│   │   │       ├── ActiveFilters.module.css        # Diseño de tags de filtros activos.
│   │   │       ├── AddToCartModal.module.css       # Estética neón del modal de carrito.
│   │   │       ├── FeaturedProducts.module.css     # Layout de la sección de destacados.
│   │   │       ├── ProductCard.module.css          # Efectos hover y bordes térmicos neón.
│   │   │       ├── ProductCarousel.module.css      # Configuración visual del slider neón.
│   │   │       └── controls.module.css             # Estilos de la barra de herramientas.
│   │   ├── promotions/                             # Gestión de campañas visuales.
│   │   │   ├── PromotionHero.astro                 # Banner interactivo de grandes ofertas.
│   │   │   └── styles/                             # Estética de las promociones.
│   │   │       └── PromotionHero.module.css        # Animaciones y gradientes del hero.
│   │   └── shared/                                 # Componentes compartidos por todo el sistema.
│   │       └── UserDropdown.astro                  # Menú desplegable interactivo de usuario.
│   ├── layouts/                                    # Wrapper y estructuras base.
│   │   ├── AdminLayout.astro                       # Esqueleto de visualización para páginas /admin.
│   │   ├── Footer.astro                            # Pie de página responsivo y legal.
│   │   ├── Layout.astro                            # Estructura HTML5 inicial (SEO & Tipografía).
│   │   ├── Navbar.astro                            # Navegación jerárquica con buscador unificado.
│   │   └── styles/                                 # Estilos de la estructura envolvente.
│   │       ├── Footer.module.css                   # Diseño del pie de página.
│   │       └── Navbar.module.css                   # Estética de la barra de navegación fija.
│   ├── lib/                                        # Utilidades y configuración de librerías.
│   │   ├── api.test.ts                             # Test de interceptores del cliente Ky.
│   │   ├── api.ts                                  # Cliente fetch centralizado con Auto-Refresh.
│   │   ├── dataReset.test.ts                       # Test de lógica de limpieza de caché.
│   │   ├── dataReset.ts                            # Herramientas de sincronización con el seed.
│   │   ├── url.test.ts                             # Test unitario de la utilidad de URLs de imagen.
│   │   └── url.ts                                  # Utilidad centralizada para el manejo de URLs de imágenes.
│   ├── pages/                                      # Sistema de rutas basado en archivos (SSR).
│   │   ├── about.astro                             # Página de información institucional.
│   │   ├── admin/                                  # Panel privado de monitoreo de negocio.
│   │   │   ├── analytics.astro                     # Dashboard de analíticas avanzadas.
│   │   │   ├── dashboard.astro                     # Dashboard con métricas y tendencias reales.
│   │   │   ├── products.astro                      # Gestión del catálogo de productos (CRUD).
│   │   │   ├── users.astro                         # Gestión del catálogo de usuarios (CRUD).
│   │   │   └── styles/                             # Estética del panel administrativo.
│   │   │       └── dashboard.module.css            # Diseño premium del dashboard.
│   │   ├── api/                                    # Puntos de conexión internos del servidor.
│   │   ├── cart.astro                              # Vista completa del carrito de compras.
│   │   ├── checkout/                               # Rutas del proceso de pago.
│   │   │   ├── failure.astro                       # Vista informativa de pago fallido.
│   │   │   ├── success.astro                       # Vista de confirmación de compra exitosa.
│   │   │   └── styles/                             # Estilos del checkout.
│   │   │       ├── failure.module.css              # Estética visual del error.
│   │   │       └── success.module.css              # Diseño premium de la confirmación.
│   │   ├── checkout.astro                          # Página maestra de finalización de orden.
│   │   ├── coming-soon.astro                       # Placeholder para secciones en desarrollo.
│   │   ├── contacto.astro                          # Formulario de ayuda y soporte técnico.
│   │   ├── faq.astro                               # Centro de respuestas y preguntas frecuentes.
│   │   ├── index.astro                             # Home page y portal de entrada.
│   │   ├── login.astro                             # Portal de ingreso de usuario.
│   │   ├── new-arrivals.astro                      # Listado dinámico de novedades del mes.
│   │   ├── offers.astro                            # Catálogo exclusivo de rebajas actuales.
│   │   ├── orders/                                 # Post-compra y seguimiento de órdenes.
│   │   │   ├── index.astro                         # Historial completo de compras del usuario.
│   │   │   ├── [id].astro                          # Detalle técnico de una compra específica.
│   │   │   └── styles/                             # Estética del historial.
│   │   │       ├── order-detail.module.css         # Diseño del desglose de orden.
│   │   │       └── orders-list.module.css          # Estructura del listado de historial.
│   │   ├── productos/                              # Catálogo dinámico e interactivo.
│   │   │   ├── [id].astro                          # Ficha técnica individual de producto (PDP).
│   │   │   └── styles/                             # Estética de la ficha de producto.
│   │   │       └── [id].module.css                 # Diseño detallado de la página de producto.
│   │   ├── profile.astro                           # Centro de gestión de cuenta de usuario.
│   │   ├── register.astro                          # Formulario de creación de cuenta neón.
│   │   ├── search.astro                            # Resultados de búsqueda con filtros dinámicos.
│   │   ├── styles/                                 # Módulos CSS de páginas específicas.
│   │   │   ├── about.module.css
│   │   │   ├── coming-soon.module.css
│   │   │   ├── contacto.module.css
│   │   │   ├── faq.module.css
│   │   │   ├── index.module.css
│   │   │   ├── login.module.css
│   │   │   ├── profile.module.css
│   │   │   ├── register.module.css
│   │   │   ├── search.module.css
│   │   │   └── terminos.module.css
│   │   └── terminos.astro                          # Documentación legal y términos de uso.
│   ├── scripts/                                    # Lógica interactiva cliente (Islands logic).
│   │   ├── auth-login.test.ts                      # Test de validación de credenciales.
│   │   ├── auth-login.ts                           # Lógica de login y manejo de tokens.
│   │   ├── auth-register.test.ts                   # Test de validación de registro.
│   │   ├── auth-register.ts                        # Lógica de creación de cuentas y Captcha.
│   │   ├── carousel.test.ts                        # Test de mecánica del slider.
│   │   ├── carousel.ts                             # Animaciones del carrusel neón.
│   │   ├── checkout-failure.test.ts                # Test de flujo de error.
│   │   ├── checkout-failure.ts                     # Lógica visual tras falla de pago.
│   │   ├── checkout-success.test.ts                # Test de flujo de éxito.
│   │   ├── checkout-success.ts                     # Lógica de limpieza y confeti post-compra.
│   │   ├── contact.test.ts                         # Test de validación de formulario.
│   │   ├── contact.ts                              # Lógica de envío de tickets de soporte.
│   │   ├── filter-modal.test.ts                    # Test de apertura/cierre de modal.
│   │   ├── filter-modal.ts                         # Lógica interactiva de filtros avanzados.
│   │   ├── navbar.test.ts                          # Test de búsqueda y menús fijos.
│   │   ├── navbar.ts                               # Navegación y búsqueda predictiva CLIENT-SIDE.
│   │   ├── order-detail.test.ts                    # Test de visualización de ítems.
│   │   ├── order-detail.ts                         # Lógica interactiva de detalle de orden.
│   │   ├── orders-list.test.ts                     # Test de paginación de órdenes.
│   │   ├── orders-list.ts                          # Inyectado dinámico del historial de compras.
│   │   ├── profile.test.ts                         # Test de edición de perfil.
│   │   ├── profile.ts                              # Lógica de gestión de datos de cuenta.
│   │   ├── promotion-hero.test.ts                  # Test de animación del hero.
│   │   ├── promotion-hero.ts                       # Control de diapositivas de la sección hero.
│   │   ├── search-filters.test.ts                  # Test de sincronización de filtros.
│   │   ├── search-filters.ts                       # Coordinación de estados UI de búsqueda.
│   │   ├── user-dropdown.test.ts                   # Tests del componente menú de opciones de usuario.
│   │   └── user-dropdown.ts                        # Lógica interactiva del menú de opciones y vistas de rol.
│   ├── services/                                   # Abstracción de llamadas a la API (Business Logic).
│   │   ├── admin.service.test.ts                   # Test de obtención de estadísticas.
│   │   ├── admin.service.ts                        # Integración con endpoints administrativos.
│   │   ├── auth.service.test.ts                    # Test unitario de autenticación global.
│   │   ├── auth.service.ts                         # Gestión central de login/logout/tokens.
│   │   ├── brand.service.test.ts                   # Test de listado de marcas.
│   │   ├── brand.service.ts                        # Catálogo de editoriales registradas.
│   │   ├── category.service.test.ts                # Test de árbol de categorías.
│   │   ├── category.service.ts                     # Estructura jerárquica de navegación.
│   │   ├── filter.service.test.ts                  # Test de normalización de filtros.
│   │   ├── filter.service.ts                       # Adaptador de parámetros de búsqueda.
│   │   ├── product.service.test.ts                 # Test unitario de catálogo.
│   │   ├── product.service.ts                      # Gestión de productos, filtros y búsqueda.
│   │   ├── promotion.service.test.ts               # Test de campañas activas.
│   │   ├── promotion.service.ts                    # Obtención de banners y descuentos.
│   │   ├── purchase.service.test.ts                # Test unitario de órdenes.
│   │   ├── purchase.service.ts                     # Gestión de transacciones y estados.
│   │   ├── subcategory.service.test.ts             # Test de subcategorías específicas.
│   │   ├── subcategory.service.ts                  # Clasificación secundaria del catálogo.
│   │   ├── support.service.test.ts                 # Test de envío de mensajes.
│   │   ├── support.service.ts                      # Enlace con el módulo de ayuda.
│   │   ├── user.service.test.ts                    # Test unitario de data de perfil.
│   │   └── user.service.ts                         # Obtención y actualización de perfiles.
│   ├── store/                                      # Gestión de estado reactivo global (Nanostores).
│   │   ├── adminStore.test.ts                      # Tests unitarios del estado de entorno de administración.
│   │   ├── adminStore.ts                           # Estado de persistencia nativo para vista binaria.
│   │   ├── cartStore.test.ts                       # Test de persistencia y sumatorias.
│   │   ├── cartStore.ts                            # Estado atomizado del carrito de compras.
│   │   ├── checkoutStore.test.ts                   # Test de validación de pago.
│   │   ├── checkoutStore.ts                        # Coordinador del flujo persistente de pago.
│   │   ├── promotionEngine.test.ts                 # Test de lógica de descuentos neón.
│   │   └── promotionEngine.ts                      # Motor de cálculo complejo de promociones.
│   ├── styles/                                     # Sistema de diseño y variables globales.
│   │   ├── globals.css                             # Tokens neón, tipografía y resets globales.
│   │   └── main.css                                # Reglas base y utilidades de estilo.
│   ├── types/                                      # Definiciones estrictas de TypeScript (Domain).
│   │   ├── admin.types.ts                          # Tipos de métricas y dashboard admin.
│   │   ├── auth.types.ts                           # Tipos de sesión, JWT e inputs auth.
│   │   ├── brand.types.ts                          # Esquema de marcas y logotipos.
│   │   ├── cart.types.ts                           # Estructura de ítems y estado del carrito.
│   │   ├── category.types.ts                       # Definición de árbol de categorías.
│   │   ├── checkout.types.ts                       # Tipos de facturación, envío y pago.
│   │   ├── common.types.ts                         # Errores, paginación y respuestas API.
│   │   ├── product.types.ts                        # Atributos de producto y variantes.
│   │   ├── promotion.types.ts                      # Esquema de banners y tipos de rebaja.
│   │   ├── purchase.types.ts                       # Definición de órdenes y transacciones.
│   │   ├── subcategory.types.ts                    # Interfaces de clústeres secundarios.
│   │   ├── support.types.ts                        # Estructura de tickets de contacto.
│   │   └── user.types.ts                           # Perfil, roles y atributos de usuario.
│   ├── env.d.ts                                    # Tipado estricto para variables de entorno.
│   └── middleware.ts                               # Middleware global de autenticación e interceptores Astro.
├── playwright.config.ts                            # Configuración de tests E2E con Playwright.
├── package.json                                    # Scripts, metadata y dependencias (pnpm).
└── README.md                                       # Documentación principal del frontend.
</code></pre>

<hr>

<h2>📚 Skills y Directrices</h2>
<p>Este proyecto se rige por un estricto conjunto de reglas arquitectónicas y de calidad de código denominadas <b>Skills</b>, ubicadas en el directorio <code>.agent/skills/</code>. Podés consultar el catálogo maestro en:</p>
<ul>
    <li><b><a href=".agent/skills/global-skills/SKILL.md">Global Skills Catalog (Frontend)</a></b>: Visión arquitectónica y registro maestro de todas las convenciones del repositorio.</li>
</ul>

<h3>Directrices Clave de Desarrollo</h3>
<p>El incumplimiento de cualquiera de estas directrices resultará en un rechazo de PR:</p>
<ul>
    <li><b><a href=".agent/skills/astro/SKILL.md">astro</a></b> & <b><a href=".agent/skills/astro-scripts/SKILL.md">astro-scripts</a></b>: Uso estricto de Islands Architecture, hidratación diferida (<code>client:visible</code>/<code>client:load</code>) y extracción obligatoria de TS complejo fuera de los archivos <code>.astro</code>.</li>
    <li><b><a href=".agent/skills/clean-structure/SKILL.md">clean-structure</a></b> & <b><a href=".agent/skills/modular-architecture/SKILL.md">modular-architecture</a></b>: Separación de dominios estricta, organización atómica de componentes y prohibición de acoplar lógica de API directamente al Virtual DOM de React.</li>
    <li><b><a href=".agent/skills/code-quality/SKILL.md">code-quality</a></b>: Impone lineamientos de código limpio, legibilidad extrema y la política estricta de "Cero Comentarios Innecesarios" (el código debe documentarse a sí mismo).</li>
    <li><b><a href=".agent/skills/css-modules/SKILL.md">css-modules</a></b> & <b><a href=".agent/skills/responsive-design/SKILL.md">responsive-design</a></b>: Enfoque colaborativo sin colisiones de clases globales y diseño <i>Mobile-First</i> evitando magic numbers.</li>
    <li><b><a href=".agent/skills/performance/SKILL.md">performance</a></b>: Mandato sobre Core Web Vitals, optimizando estrictamente el <i>Largest Contentful Paint</i> y <i>Cumulative Layout Shift</i>.</li>
    <li><b><a href=".agent/skills/readme-auto-sync/SKILL.md">readme-auto-sync</a></b>: Reglas obligatorias para sincronizar automáticamente el README.md al modificar la estructura del proyecto o añadir tests.</li>
    <li><b><a href=".agent/skills/sileo-notifications/SKILL.md">sileo-notifications</a></b>: Única vía aceptada en toda la UI para lanzar feedback visual (<code>window.triggerSileo</code>). Prohibidos los alertas genéricos nativos.</li>
    <li><b><a href=".agent/skills/skill-generator/SKILL.md">skill-generator</a></b>: Herramienta interna para orquestar y generar nuevas directrices manteniendo la cohesión e integridad del ecosistema MarketFlex.</li>
    <li><b><a href=".agent/skills/test-enforcement/SKILL.md">test-enforcement</a></b> & <b><a href=".agent/skills/test/SKILL.md">test</a></b>: Testeo de componentes UI y lógica aislada (<code>.ts</code>, <code>.tsx</code>). Deben estar acompañados forzosamente por su archivo <code>.test.ts(x)</code>.</li>
</ul>

<hr>

<h2>🧪 Testing y Calidad</h2>
<p>
  El frontend de <b>MarketFlex</b> implementa una estrategia de prueba robusta y dual, diseñada para garantizar que tanto la lógica de negocio interna como la experiencia del usuario final sean impecables.
</p>

<ul>
  <li><b>🛡️ Unit Testing: Cobertura Total de Componentes</b>
    <p>Nuestra arquitectura de testing garantiza que ningún fragmento de lógica de negocio o interacción visual llegue a producción sin ser validado. Contamos con una cobertura del 100% en todos los dominios críticos del sistema (46 archivos de test):</p>
    <table>
      <thead>
        <tr>
          <th>Categoría</th>
          <th>Pruebas Destacadas</th>
          <th>Objetivo de la Prueba</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><b>React Components (UI)</b></td>
          <td><code>CartView</code>, <code>CheckoutForm</code>, <code>CheckoutSummary</code>, <code>AddToCartButton</code>, <code>AdminSidebar</code>, <code>DashboardView</code>, <code>StatTable</code>, <code>Notifications</code></td>
          <td>Valida renderizado correcto, estados de carga, manejo de inputs, cruces de vistas (Client/Admin) y comportamiento de componentes interactivos críticos.</td>
        </tr>
        <tr>
          <td><b>Core Interactive Logic</b></td>
          <td><code>auth-login</code>, <code>carousel</code>, <code>order-detail</code>, <code>user-dropdown</code>, <code>filter-modal</code>, <code>checkout-success</code></td>
          <td>Asegura el funcionamiento aislado de la lógica de cliente de las "Astro Islands" (Manejo de DOM Vanilla, Eventos, Animaciones y Redirects).</td>
        </tr>
        <tr>
          <td><b>State & Engines</b></td>
          <td><code>cartStore</code>, <code>checkoutStore</code>, <code>adminStore</code>, <code>promotionEngine</code></td>
          <td>Pruebas de alta complejidad sobre el motor de descuentos, coordinación del flujo de compra y persistencia de modos (ej. Vista Administrador).</td>
        </tr>
        <tr>
          <td><b>API & Infra Services</b></td>
          <td><code>auth.service</code>, <code>product.service</code>, <code>purchase.service</code>, <code>category.service</code>, <code>filter.service</code>, <code>brand.service</code></td>
          <td>Verifica la comunicación con el backend, transformación de datos y el sistema de Auto-Refresh de tokens JWT.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><b>🎭 Pruebas E2E (End-to-End):</b> Implementadas con <a href="https://playwright.dev/">Playwright</a>. Estas pruebas simulan el comportamiento real del usuario en navegadores modernos, validando integraciones complejas que los tests unitarios no pueden capturar.</li>
  <li><b>🔗 Mocking de API:</b> Mediante Mock Service Worker (MSW), simulamos el comportamiento del backend para realizar pruebas deterministas y rápidas sin depender de una base de datos real.</li>
</ul>

<hr>

<h3>🎭 Playwright E2E: El Flujo Maestro</h3>
<p>
  La joya de nuestra corona en testing es el <code>marketflex.spec.ts</code>. Este test no solo verifica que la página cargue, sino que ejecuta el <b>"Foundational Flow"</b> del negocio, asegurando que un cliente pueda completar su propósito de principio a fin.
</p>

<table>
  <thead>
    <tr>
      <th>Fase</th>
      <th>Descripción del Test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><b>1. Autenticación</b></td>
      <td>Navega al login, ingresa credenciales y verifica el mensaje de bienvenida dinámico.</td>
    </tr>
    <tr>
      <td><b>2. Descubrimiento</b></td>
      <td>Explora la sección de ofertas, selecciona un producto real y navega a su ficha técnica (PDP).</td>
    </tr>
    <tr>
      <td><b>3. Interacción y Compra</b></td>
      <td>Agrega un producto al carrito, verifica la notificación de éxito dinámica y procede al panel lateral emergente.</td>
    </tr>
    <tr>
      <td><b>4. Transacción Segura</b></td>
      <td>Visita el checkout, completa un largo formulario de validación en tiempo real, verifica el coste total con envíos e impacta la compra simulada en la base de datos.</td>
    </tr>
    <tr>
      <td><b>5. Fidelización y Tracking</b></td>
      <td>Verifica la pantalla de "Order Success", la lluvia de confeti (canvas real) y navega al historial de mis compras para rastrear la orden original.</td>
    </tr>
  </tbody>
</table>

<h3>Comandos de Test</h3>
<pre>
# 🧪 Ejecutar tests unitarios (Servicios y Scripts)
pnpm test
# 🎭 Ejecutar suite E2E completa (Modo Headed)
pnpm run test:e2e
# 🛠️ Abrir el Playwright Test Runner (Interfaz UI Interactiva)
pnpm run test:e2e:ui
</pre>

<hr>

<h2>⚡ Rendimiento y SEO (Core Web Vitals)</h2>
<p>
  El frontend fue construido con una fuerte obsesión por el rendimiento, asegurando una experiencia de usuario instantánea y métricas perfectas para motores de búsqueda.
</p>
<ul>
  <li><b>Zero JS por defecto:</b> Gracias al compilador de Astro, las páginas como el Catálogo, el Home, o el Detalle de Producto se envían al navegador como HTML puro de carga inicial instantánea.</li>
  <li><b>Hidratación Diferida:</b> Solo los componentes estrictamente interactivos (<code>CartView</code>, <code>CheckoutForm</code>) envían JavaScript usando la directiva <code>client:load</code> o <code>client:visible</code> (cargan el script sólo cuando el usuario hace scroll hasta ellos).</li>
  <li><b>Optimización SEO Semántica:</b> Uso estricto de etiquetas meta en <code>Layout.astro</code>, URLs amigables pre-generadas (ej. <code>/productos/123</code> en vez de <code>/product?id=123</code>) para correcta indexación orgánica.</li>
  <li><b>Assets Premium:</b> Tipografía <i>Inter</i> optimizada localmente vía <code>@fontsource/inter</code> y recursos servidos desde caché.</li>
</ul>

<hr>

<h2>🔐 Variables de Entorno</h2>
<p>Crea un archivo <code>.env</code> en la raíz del proyecto con las siguientes variables:</p>
<pre>
PORT=2611
PUBLIC_API_URL=http://localhost:5979/api
PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
PUBLIC_FACEBOOK_APP_ID=your_facebook_app_id
PUBLIC_RECAPTCHA_SITE_KEY=your_recaptcha_site_key
</pre>

<h2>🚀 Instalación</h2>
<pre>
git clone https://github.com/agussantinelli/MarketFlex-FrontEnd.git
cd MarketFlex-FrontEnd
pnpm install
pnpm dev
</pre>

<hr>

<h2>💻 Comandos pnpm disponibles</h2>

<table>
  <thead>
    <tr>
      <th>Comando</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><pre><code class="language-bash">pnpm dev</code></pre></td>
      <td>Inicia el servidor de desarrollo local de Astro (por defecto en <code>localhost:2611</code>) con soporte interactivo HMR.</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm build</code></pre></td>
      <td>Construye la aplicación para producción, generando los assets estáticos y preparando la lógica SSR dentro de la carpeta <code>dist/</code>.</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm preview</code></pre></td>
      <td>Crea un pequeño servidor estático local para previsualizar y testear la aplicación generada por <code>pnpm build</code> tal cual se verá en producción.</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm astro</code></pre></td>
      <td>Invoca la CLI nativa de Astro para utilizar comandos avanzados (ej. <code>astro check</code>, <code>astro sync</code>, <code>astro add</code>).</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm test</code></pre></td>
      <td>Ejecuta únicamente una vez toda la suite de pruebas unitarias y de integración de Vitest de inicio a fin.</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm test:watch</code></pre></td>
      <td>Inicia la suite de Vitest en modo <i>watch</i> interactivo. Se reejecutarán automáticamente los tests al guardar un archivo modificado.</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm run test:e2e</code></pre></td>
      <td>Ejecuta la suite End-to-End de Playwright instanciando el navegador activamente en tu pantalla (<i>--headed</i>).</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm run test:e2e:ci</code></pre></td>
      <td>Ejecuta la suite de Playwright en modo silencioso o <i>headless</i> (sin UI). Ideal para los pipelines automatizados de GitHub Actions.</td>
    </tr>
    <tr>
      <td><pre><code class="language-bash">pnpm run test:e2e:ui</code></pre></td>
      <td>Inicia de forma local el Playwright Test Runner gráfico (en el puerto estándar) para debugear flujos y observar visualmente en detalle la interacciones E2E.</td>
    </tr>
  </tbody>
</table>

<hr>

<h2 align="left">⚖️ Licencia y Propiedad Intelectual</h2>

<p align="left">
  Este proyecto es <b>propiedad intelectual privada</b> de Agustín Santinelli. No se otorga ninguna licencia de uso abierto. Puedes consultar los términos detallados en el archivo 
  <a href="LICENSE"><code>LICENSE</code></a> incluido en este repositorio.
</p>

<p align="left">
  <i>
    ⚠️ <b>Restricción Firme:</b> Queda terminantemente prohibida la copia, reproducción, distribución o modificación de este código sin autorización expresa del autor. Este repositorio se publica exclusivamente como exhibición de portafolio profesional.
  </i>
</p>
<hr />

<h2 align="left">🚫 Copyright Total</h2>

<p align="left">
  Este proyecto es propiedad intelectual exclusiva de <b>Agustín Santinelli</b>. No se aceptan contribuciones externas o forks para su uso público sin previo acuerdo por escrito.
</p>

<p align="left">
  Si tienes sugerencias directas o deseas explorar colaboraciones comerciales, por favor contacta al autor: 
  <a href="mailto:agustinsantinelli@gmail.com">agustinsantinelli@gmail.com</a>.
</p>

<hr />

<p align="center">
  Desarrollado con mucho ❤️ y 🧉 por <a href="https://github.com/agussantinelli">Agus Santinelli</a>
</p>
