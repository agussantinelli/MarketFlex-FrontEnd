<h1 align="center">🚀 MarketFlex - FrontEnd</h1>
<p align="center">
  <img src="./public/logo-marketflex-circle.png" alt="MarketFlex Logo" width="150" height="150">
</p>

<p align="center">
    <a href="https://github.com/agussantinelli/MarketFlex-FrontEnd" target="_blank">
        <img src="https://img.shields.io/badge/🚀%20Repo%20Frontend%20(Estás%20Aquí)-Astro-BC52EE?style=for-the-badge&logo=astro&logoColor=white" alt="Frontend Repo Badge"/>
    </a>
    <a href="https://github.com/agussantinelli/MarketFlex-BackEnd" target="_blank">
        <img src="https://img.shields.io/badge/⚙️%20Repo%20Backend-Node.js%20%26%20Hono-E0234E?style=for-the-badge&logo=hono&logoColor=white" alt="Backend Repo Badge"/>
    </a>
    <a href="https://github.com/agussantinelli" target="_blank">
        <img src="https://img.shields.io/badge/👤%20Contacto-agussantinelli-000000?style=for-the-badge&logo=github&logoColor=white" alt="Contact Badge"/>
    </a>
</p>

<div align="center">
    <img src="https://img.shields.io/badge/Astro-5.17.1-BC52EE?style=for-the-badge&logo=astro&logoColor=white" alt="Astro Badge">
    <img src="https://img.shields.io/badge/React-19.2.4-61DAFB?style=for-the-badge&logo=react&logoColor=white" alt="React Badge">
    <img src="https://img.shields.io/badge/Sileo-Notifications-FFD700?style=for-the-badge&logo=vlc&logoColor=black" alt="Sileo Badge">
    <img src="https://img.shields.io/badge/TypeScript-5.9.3-3178C6?style=for-the-badge&logo=typescript&logoColor=white" alt="TS Badge">
    <img src="https://img.shields.io/badge/OpenAPI-Consuming-6BA539?style=for-the-badge&logo=openapiinitiative&logoColor=white" alt="OpenAPI Badge">
    <img src="https://img.shields.io/badge/Zustand-State-764ABC?style=for-the-badge&logo=zustand&logoColor=white" alt="Zustand Badge">
    <img src="https://img.shields.io/badge/Nanostores-React-3178C6?style=for-the-badge&logo=atom&logoColor=white" alt="Nanostores Badge">
    <img src="https://img.shields.io/badge/pnpm-10+-F69220?style=for-the-badge&logo=pnpm&logoColor=white" alt="pnpm Badge">
    <img src="https://img.shields.io/badge/Ky-1.14.3-FF4081?style=for-the-badge&logo=ky&logoColor=white" alt="Ky Badge">
    <img src="https://img.shields.io/badge/Lucide-Icons-F56565?style=for-the-badge&logo=lucide&logoColor=white" alt="Lucide Badge">
    <img src="https://img.shields.io/badge/React--Icons-Librería-E91E63?style=for-the-badge&logo=react&logoColor=white" alt="React-Icons Badge">
    <img src="https://img.shields.io/badge/Google_Sign--In-GSI-4285F4?style=for-the-badge&logo=google&logoColor=white" alt="Google Sign-In Badge">
    <img src="https://img.shields.io/badge/Facebook_Login-SDK-1877F2?style=for-the-badge&logo=facebook&logoColor=white" alt="Facebook Login Badge">
    <img src="https://img.shields.io/badge/JWT-Auth-black?style=for-the-badge&logo=jsonwebtokens&logoColor=white" alt="JWT Badge">
    <img src="https://img.shields.io/badge/reCAPTCHA-v3-4285F4?style=for-the-badge&logo=google&logoColor=white" alt="reCAPTCHA Badge">
    <img src="https://img.shields.io/badge/HTTPS-mkcert-003666?style=for-the-badge&logo=letsencrypt&logoColor=white" alt="mkcert Badge">
    <img src="https://img.shields.io/badge/Vite-6.x-646CFF?style=for-the-badge&logo=vite&logoColor=white" alt="Vite Badge">
    <img src="https://img.shields.io/badge/Vitest-4.0.18-6E9F18?style=for-the-badge&logo=vitest&logoColor=white" alt="Vitest Badge">
    <img src="https://img.shields.io/badge/MSW-2.x-FF6A00?style=for-the-badge&logo=mockserviceworker&logoColor=white" alt="MSW Badge">
    <img src="https://img.shields.io/badge/Playwright-1.58.2-2EAD33?style=for-the-badge&logo=playwright&logoColor=white" alt="Playwright Badge">
    <img src="https://img.shields.io/badge/Test_Enforcement-Mandatory-orange?style=for-the-badge&logo=vitest&logoColor=white" alt="Test Enforcement Badge">
</div>

<div align="center">
    <a href="https://drive.google.com/drive/folders/1qDvPJkxC14DdE-JEqHtvR_LL-ULDbvRL" target="_blank">
        <img src="https://img.shields.io/badge/📂%20Drive%20Documentación-4285F4?style=for-the-badge&logo=googledrive&logoColor=white" alt="Drive Docs Badge"/>
    </a>
</div>

<div align="center">
  <img src="https://img.shields.io/badge/Copyright-All_Rights_Reserved-red?style=for-the-badge&logo=copyright&logoColor=white" alt="Copyright Badge"/>
</div>
<hr>

<h2>🌀 El Factor Flex: Adaptabilidad Sin Límites</h2>
<p align="center">
  <i>"Un solo núcleo, infinitas posibilidades."</i>
</p>
<p>
  Lo más importante de <b>MarketFlex</b> es su capacidad de metamorfosis. La arquitectura está diseñada para que la interfaz pueda ser adaptada a <b>marketplaces con orientaciones completamente distintas</b> sin reescribir la lógica base. 
  <br><br>
  Desde un retail de moda hasta una plataforma de servicios profesionales o un mercado de coleccionables digitales; la UI se amolda a la naturaleza del producto.
</p>


<hr>

<h2>🛠️ Stack Tecnológico</h2>
<table>
    <thead>
        <tr>
            <th>Capa / Área</th>
            <th>Tecnología</th>
            <th>Versión / Detalle</th>
            <th>Uso Principal</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Runtime</strong></td>
            <td>Node.js</td>
            <td><strong>20+</strong> (LTS)</td>
            <td>Entorno de ejecución y construcción del proyecto.</td>
        </tr>
        <tr>
            <td><strong>Framework</strong></td>
            <td>Astro</td>
            <td><strong>^5.17.1</strong></td>
            <td>Arquitectura de islas, rendimiento y routing.</td>
        </tr>
        <tr>
            <td><strong>Lenguaje</strong></td>
            <td>TypeScript</td>
            <td><strong>^5.9.3</strong></td>
            <td>Tipado estricto para componentes y lógica de negocio.</td>
        </tr>
        <tr>
            <td><strong>Estilos</strong></td>
            <td>CSS Modules (Scoped)</td>
            <td>.module.css</td>
            <td>Estilizado modular con aislamiento automático por componente.</td>
        </tr>
        <tr>
            <td><strong>E2E Testing</strong></td>
            <td>Playwright</td>
            <td><strong>^1.58.2</strong></td>
            <td>Pruebas de punta a punta en navegadores reales.</td>
        </tr>
        <tr>
            <td><strong>Unit Testing</strong></td>
            <td>Vitest</td>
            <td><strong>^4.0.18</strong></td>
            <td>Pruebas unitarias ultrarrápidas para servicios.</td>
        </tr>
        <tr>
            <td><strong>Mocking</strong></td>
            <td>MSW (Mock Service Worker)</td>
            <td><strong>^2.12.10</strong></td>
            <td>Intercepción de red para pruebas deterministas.</td>
        </tr>
        <tr>
            <td><strong>Component Testing</strong></td>
            <td>React Testing Library</td>
            <td><strong>^16.3.2</strong></td>
            <td>Pruebas de comportamiento para componentes React.</td>
        </tr>
        <tr>
            <td><strong>Dependency Manager</strong></td>
            <td>pnpm</td>
            <td><strong>Latest</strong></td>
            <td>Gestión de dependencias eficiente y veloz.</td>
        </tr>
        <tr>
            <td><strong>Componentes</strong></td>
            <td>Astro Components</td>
            <td>.astro</td>
            <td>Componentes de servidor (SSR/SSG) por defecto.</td>
        </tr>
        <tr>
            <td><strong>Integración</strong></td>
            <td>Ky</td>
            <td><strong>^1.14.3</strong></td>
            <td>Consumo de la API Backend (ligero y moderno).</td>
        </tr>
        <tr>
            <td><strong>Iconos</strong></td>
            <td>astro-icon, Lucide & react-icons</td>
            <td><strong>Latest</strong></td>
            <td>Iconografía SVG optimizada, librerías modernas para React y animaciones.</td>
        </tr>
        <tr>
            <td><strong>Tipografía</strong></td>
            <td>@fontsource/inter</td>
            <td><strong>Latest</strong></td>
            <td>Gestión de fuentes local (sin llamadas externas).</td>
        </tr>
        <tr>
            <td><strong>Notificaciones</strong></td>
            <td>Sileo</td>
            <td><strong>^0.1.1</strong></td>
            <td>Sistema de avisos visuales con efectos "gooey".</td>
        </tr>
        <tr>
            <td><strong>UI Framework</strong></td>
            <td>React</td>
            <td><strong>^19.2.4</strong></td>
            <td>Soporte para componentes interactivos y librerías externas.</td>
        </tr>
        <tr>
            <td><strong>DX Tools</strong></td>
            <td>Astro Check</td>
            <td><strong>^0.9.6</strong></td>
            <td>Validación estática y visualización de errores de Astro.</td>
        </tr>
        <tr>
            <td><strong>Auth Social</strong></td>
            <td>Google Sign-In (GSI)</td>
            <td><strong>Latest</strong></td>
            <td>Inicio de sesión con cuenta de Google (Identity Services).</td>
        </tr>
        <tr>
            <td><strong>Auth Social</strong></td>
            <td>Facebook Login SDK</td>
            <td><strong>v21.0</strong></td>
            <td>Inicio de sesión con cuenta de Facebook (JS SDK).</td>
        </tr>
        <tr>
            <td><strong>Seguridad</strong></td>
            <td>JWT & Refresh Tokens</td>
            <td><strong>Auto-Refresh</strong></td>
            <td>Renovación automática de sesión interceptada vía Ky.</td>
        </tr>
        <tr>
            <td><strong>Anti-Bot</strong></td>
            <td>reCAPTCHA v3</td>
            <td><strong>Invisible</strong></td>
            <td>Protección automática contra bots sin fricción para el usuario.</td>
        </tr>
        <tr>
            <td><strong>Herramientas</strong></td>
            <td>vite-plugin-mkcert</td>
            <td><strong>^1.17.9</strong></td>
            <td>Generación de certificados SSL (HTTPS Local) para OAuth.</td>
        </tr>
        <tr>
            <td><strong>State Management</strong></td>
            <td>Zustand & Nanostores</td>
            <td><strong>Latest</strong></td>
            <td>Gestión de estado global para React Islands y compartida entre frameworks (Astro/React).</td>
        </tr>
    </tbody>
</table>

<hr>

<h2>📦 Características Principales</h2>
<ul>
  <li>📊 <b>Admin Dashboard (Data-Driven):</b> Panel interactivo con métricas reales y visualizaciones de tendencias mediante el componente `StatTable`, permitiendo una gestión eficiente de ventas e ingresos.</li>
  <li>🛡️ <b>Ecosistema de Vistas Binarias:</b> Sistema inteligente que alterna entre el entorno de Administrador y Cliente con transiciones fluidas y limpieza de estados persistentes.</li>
  <li>🛒 <b>Experiencia de Carrito Premium:</b> Diseño basado en *Glassmorphism* de alta densidad con micro-animaciones, controles de cantidad tipo pildora y gestión de estado atomizada mediante Nanostores.</li>
  <li>🛍️ <b>Checkout Multi-Sección & Fluid:</b> Proceso de compra dividido en fases lógicas (Personal, Envío, Pago) con validación en tiempo real y auto-completado inteligente.</li>
  <li>🌙 <b>Dark Mode Nativo (High-End):</b> Implementación de tema oscuro profundo con efectos de desenfoque y transparencias que realzan la estética neón oficial de MarketFlex.</li>
  <li>🏝️ <b>Arquitectura de Islas (Astro):</b> Hidratación selectiva de componentes React solo cuando es necesario, garantizando tiempos de carga ínfimos y un rendimiento excepcional.</li>
  <li>🔍 <b>Sistema de Filtrado Editorial:</b> Buscador avanzado con filtros multi-selección, persistencia en URL y soporte para claves fijas (`fixedKeys`) en contextos específicos.</li>
  <li>🧮 <b>Motor de Descuentos Sincronizado:</b> Lógica de promociones NxM (3x2, 2x1) calculada en el cliente con precisión absoluta respecto a las reglas del backend.</li>
  <li>🧪 <b>100% Logic Coverage:</b> Suite robusta de **161 tests unitarios** que cubren el 100% de la lógica de servicios, scripts y estados globales.</li>
  <li>🔄 <b>Invalidación de Cache Inteligente:</b> Detección automática de re-seeds en la base de datos para forzar la limpieza del `localStorage`, evitando errores de inconsistencia de datos.</li>
  <li>📱 <b>Responsive Design de Alta Densidad:</b> Interfaz optimizada meticulosamente para dispositivos móviles, escalando sin pérdida de estética o funcionalidad a pantallas de escritorio.</li>
  <li>🔒 <b>Seguridad & Anti-Bot:</b> Integración profunda con JWT (Auto-Refresh), Google reCAPTCHA v3 e HTTPS local garantizado mediante certificados confiables.</li>
  <li>⚡ <b>Navbar Inteligente (Contextual):</b> Navegación jerárquica con subcategorías anidadas, triggers de flecha y sistema de *hover delay* (2s) para una navegación fluida.</li>
  <li>🎡 <b>Componentes Visuales Premium:</b> Carruseles interactivos con estados dinámicos, badges sociales oficiales y micro-interacciones neón en toda la UI.</li>
  <li>✨ <b>Páginas de Contexto Curado:</b> Secciones dedicadas para Novedades (`/new-arrivals`) y Ofertas (`/offers`) con filtros pre-configurados y navegación optimizada.</li>
  <li>🛡️ <b>Mocking de API (MSW):</b> Integración con Mock Service Worker para simular respuestas del backend en tests unitarios, permitiendo pruebas deterministas de interceptores y flujo de tokens.</li>
</ul>

<hr>

<h2>👁️ Sistema de Vistas del Administrador</h2>
<p>Para simplificar y optimizar la experiencia de los administradores de la plataforma, MarketFlex implementa un sistema de <b>Vistas Binarias (Strict Binary Views)</b> integradas directamente en el menú de usuario. Al iniciar sesión con una cuenta de rol `admin`, el comportamiento es el siguiente:</p>
<ul>
    <li><b>Landing por Defecto (Panel Administrador):</b> Todo inicio de sesión de administrador redirige inmediata y automáticamente al <code>/admin/dashboard</code>. El administrador aterriza en su área de trabajo orientada a métricas sin pasar por el catálogo de ventas y la web deshabilita temporalmente el CSS global para evitar colisiones con la UI administrativa.</li>
    <li><b>Vista Cliente (Tienda):</b> Desde el menú desplegable del perfil superior (el cual mantiene un estilo oscuro `theme="dark"` unificado), existe un botón verde llamado <b>"Cambiar a Vista Cliente"</b>. Al accionarlo, el administrador es redirigido a la tienda (`/`) y puede navegar como un usuario estándar (ej. auditar productos o promociones). Las rutas administrativas quedan inaccesibles en este estado.</li>
    <li><b>Retorno al Panel:</b> Mientras se navega en la "Vista Cliente", el menú del perfil inteligente oculta las opciones comerciales (como "Mis Compras") y expone un botón estratégico (también verde oscuro) llamado <b>"Cambiar al Panel Administrador"</b>, devolviendo al staff a sus métricas con un clic y cerrando el ciclo.</li>
</ul>

<hr>

<h2>🏝️ Arquitectura de Componentes (Astro Islands)</h2>
<p>Este proyecto se enorgullece de ser súper rápido y eficiente al renderizar gracias a la implementación nativa de la <b>Arquitectura de Islas de Astro</b>. El patrón de diseño sigue estos principios rectores:</p>
<ul>
  <li><b>Modularización de Estilos (CSS Modules):</b> Siguiendo las directrices de la skill <code>css-modules</code>, todos los estilos complejos se extraen a archivos <code>.module.css</code> dentro de subdirectorios <code>styles/</code> locales al componente o página. Esto elimina colisiones de nombres y asegura que cada archivo de estilo solo afecte a su dueño.</li>
  <li><b>Esqueleto y Contenidos Estáticos (Astro Puro):</b> La inmensa mayoría de la UI (Barra de Navegación, Pie de Página, Tarjetas de Producto, e incluso la lógica pesada de <code>login.astro</code>) es renderizada en el servidor empleando exclusivamente componentes <code>.astro</code>. Esto expone un HTML súper ligero sin un gramo innecesario de JavaScript al cliente.</li>
  <li><b>Islas Interactivas (React):</b> Únicamente los micro-componentes que de verdad demandan reactividad o gestión de estado compleja en el cliente se escriben en React. El mejor ejemplo en este ecosistema es el sistema de notificaciones Sileo (<code>&lt;Notifications client:only="react" /&gt;</code>), que se hidrata de forma aislada sin afectar el rendimiento global del sitio restante.</li>
  <li><b>Cero Dependencias Obesas:</b> Separar de manera tan quirúrgica el contenido inerte del interactivo permite que el marketplace escale para manejar catálogos enormes sin comprometer jamás las métricas de carga del navegador o el TTI (<i>Time To Interactive</i>).</li>
</ul>

<hr>

<h2>🌐 Flujo de Datos y Consumo de API</h2>
<p>La comunicación con el backend (Hono/Node.js) se gestiona centralizadamente utilizando <b>Ky</b>, una librería cliente HTTP moderna y ligera basada en la API Fetch nativa. El corazón de este flujo se encuentra en <code>src/lib/api.ts</code>.</p>
<ul>
  <li><b>Instancia Centralizada:</b> Todos los servicios (como <code>auth.service.ts</code> o <code>product.service.ts</code>) utilizan la misma instancia pre-configurada de Ky. Esto garantiza consistencia en las URLs, headers comunes y tiempos de espera (<i>timeouts</i>).</li>
  <li><b>Reset de Datos (Auto-Invalidation):</b> Utilidad <code>dataReset.ts</code> que sincroniza el estado local con la versión del servidor, integrada globalmente en el <code>Layout.astro</code>.</li>
  <li><b>Intercepción de Salida (JWT):</b> Mediante un <i>hook</i> <code>beforeRequest</code>, la API inyecta automáticamente el encabezado <code>Authorization: Bearer [accessToken]</code>.</li>
  <li><b>Intercepción de Entrada (Auto-Refresh):</b> Se implementó un interceptor <code>afterResponse</code> que detecta errores <code>401 Unauthorized</code>. Si el token expiró, el interceptor solicita un nuevo par de tokens al backend usando el <code>marketflex_refresh_token</code> y reintenta la petición original de forma transparente para el usuario.</li>
</ul>

<hr>

<h2>🔔 Manejo de Estados y Notificaciones</h2>
<p>Dada la naturaleza estática principal de Astro, la comunicación de estados entre distintas páginas (por ejemplo, informar si un Login fue exitoso o falló tras una redirección) se resuelve de un modo limpio y sin estado global pesado:</p>
<ul>
  <li><b>Query Parameters como Estado:</b> La aplicación aprovecha activamente los parámetros de la URL (ej. <code>?error=true</code> o <code>?login_success=true&user=...</code>) para pasar contexto a la siguiente vista sin saturar el almacenamiento local o requerir librerías de estado complejas como Redux o Zustand.</li>
  <li><b>Notificaciones Reactivas (Sileo):</b> El componente de React <code>&lt;Notifications /&gt;</code> se inicializa verificando estos <i>query params</i>. Si detecta el parámetro requerido (ej. <code>requiredQueryParam="error"</code>), monta de inmediato el <i>toast notification</i> con animaciones "gooey" hermosas de la librería Sileo, proporcionando una experiencia reactiva instantánea sobre un esqueleto pre-renderizado.</li>
</ul>

<hr>

<h2>📑 Sistema de Paginación</h2>
<p>El marketplace utiliza un sistema de paginación tradicional basado en URL para el catálogo y resultados de búsqueda, lo que garantiza que los usuarios no pierdan su posición y puedan compartir enlaces a páginas específicas.</p>
<ul>
    <li><b>Navegación Persistente:</b> Los filtros de búsqueda, categorías y ordenamiento se preservan automáticamente al cambiar de página.</li>
    <li><b>Metadatos de Navegación:</b> Los usuarios reciben feedback claro sobre su ubicación (ej: <i>"Página 2 de 10, viendo 21-40 de 200 productos"</i>).</li>
    <li><b>UI Premium:</b> Componente de navegación con efecto <i>glassmorphism</i> y optimización responsive:
        <ul>
            <li><b>Desktop:</b> Barra horizontal completa con números y navegación directa.</li>
            <li><b>Mobile:</b> Diseño compacto con botones de navegación adyacentes ("Anterior/Siguiente") para una mejor usabilidad táctil.</li>
        </ul>
    </li>
</ul>

<hr>

<h2>🔐 Seguridad y Autenticación</h2>
<p>
  El sistema implementa múltiples capas de seguridad para proteger el acceso y los datos de los usuarios.
</p>
<ul>
  <li>
    <b>Sesiones Persistentes (Refresh Tokens):</b> Manejo seguro de sesiones duales. El <code>marketflex_token</code> (15 min) se usa para peticiones, mientras que el <code>marketflex_refresh_token</code> (7 días) permite renovar la sesión sin que el usuario tenga que volver a loguearse.
  </li>
  <li>
    <b>JWT (Json Web Tokens):</b> Los tokens se almacenan en <code>localStorage</code> con el prefijo <code>marketflex_</code> para evitar colisiones y se inyectan automáticamente en cada petición HTTP saliente.
  </li>
  <li>
    <b>Login Tradicional:</b> Formulario de email/contraseña con validación en tiempo real de complejidad (Mayúsculas, Números, Longitud) y persistencia en el backend.
  </li>
  <li>
    <b>reCAPTCHA v3 (Invisible):</b> Verificación automática de "humanidad" basada en comportamiento, eliminando la necesidad de seleccionar imágenes o checkboxes manuales.
  </li>
  <li>
    <b>Login Social — Google:</b> Integración con <b>Google Identity Services (GSI)</b>. El usuario hace click → popup de Google → se obtiene un <code>ID Token</code> → se verifica en el backend con <code>google-auth-library</code>.
  </li>
  <li>
    <b>Login Social — Facebook:</b> Integración con <b>Facebook JS SDK (v21.0)</b>. El usuario hace click → ventana de Facebook → se obtiene un <code>Access Token</code> → se verifica en el backend vía <code>Graph API</code>.
  </li>
  <li>
    <b>Creación automática de cuenta:</b> Si el usuario social no existe, se crea automáticamente. Si ya existe, se vincula. Se diferencia con mensajes: <b>"¡Bienvenido!"</b> vs <b>"Bienvenido de nuevo"</b>.
  </li>
  <li>
    <b>HTTPS en Desarrollo:</b> Uso de <code>vite-plugin-mkcert</code> para generar una Autoridad Certificadora (CA) local y certificados confiables. Esto elimina la advertencia de "Conexión no privada" en el navegador y es un requisito estricto del SDK de Facebook para <code>FB.login()</code>. <i>Nota: La primera vez que ejecutes <code>pnpm dev</code>, tu sistema operativo podría solicitar permisos de administrador para instalar la CA.</i>
  </li>
  <li>
    <b>Logos locales:</b> Los logos de Google y Facebook se sirven desde <code>public/logos/</code> para evitar dependencias externas.
  </li>
</ul>

<hr>

<h2>📁 Estructura del Proyecto</h2>

<pre><code>MarketFlex-FrontEnd/
├── .agent/                                         # Configuración del asistente y sus capacidades.
│   ├── skills/                                     # Guías de arquitectura y desarrollo del proyecto.
│   └── workflows/                                  # Automatización de tareas complejas (Tests, E2E).
├── .github/                                        # Ajustes de GitHub y CI/CD global.
│   └── workflows/                                  # Definición de pipelines automatizados.
│       └── frontend-tests.yml                      # Ejecución de tests unitarios y suite Playwright.
├── .astro/                                         # Archivos temporales de compilación de Astro.
├── public/                                         # Activos estáticos servidos directamente (Iconos, Font).
│   ├── background/                                 # Galería de texturas térmicas y fondos premium.
│   ├── logos/                                      # Branding oficial y logotipos sociales.
│   └── ...                                         # Isotipos y recursos gráficos adicionales.
├── src/                                            # Núcleo del frontend de la aplicación.
│   ├── components/                                 # Componentes reutilizables (Arquitectura de Islas).
│   │   ├── admin/                                  # Componentes para el panel de administración.
│   │   │   ├── AdminHeader.astro                   # Barra superior administrativa con buscador y usuario.
│   │   │   ├── AdminSidebar.test.tsx               # Test de renderizado y lógica del sidebar.
│   │   │   ├── AdminSidebar.tsx                    # Navegación lateral principal panel privado.
│   │   │   ├── DashboardView.test.tsx              # Pruebas del panel interactivo.
│   │   │   ├── DashboardView.tsx                   # Vista principal de métricas y ventas (React).
│   │   │   └── styles/                             # Módulos CSS administrativos.
│   │   │       ├── AdminHeader.module.css          # Estilos de la barra de navegación superior.
│   │   │       ├── AdminSidebar.module.css         # Estilos del menú lateral.
│   │   │       └── dashboard.module.css            # Estilos dedicados del dashboard.
│   │   ├── auth/                                   # UI de login, registro y validación social.
│   │   │   ├── AuthInputs.astro                    # Inputs estandarizados para formularios auth.
│   │   │   ├── Captcha.astro                       # Integración visual de Google reCAPTCHA v3.
│   │   │   └── styles/                             # Módulos CSS específicos de auth.
│   │   │       └── AuthInputs.module.css           # Estilos de los inputs de autenticación.
│   │   ├── cart/                                   # Gestión visual del carrito de compras.
│   │   │   ├── CartView.test.tsx                   # Test del panel interactivo de carrito.
│   │   │   ├── CartView.tsx                        # UI de gestión de ítems y totales (React).
│   │   │   └── styles/                             # Estilos modulares del carrito.
│   │   │       └── CartView.module.css             # Diseño premium del panel lateral de compra.
│   │   ├── checkout/                               # Flujo final de transacción.
│   │   │   ├── CheckoutForm.test.tsx               # Test de validación del formulario de pago.
│   │   │   ├── CheckoutForm.tsx                    # Formulario multi-paso de envío (React).
│   │   │   ├── CheckoutSummary.test.tsx            # Test del cálculo de totales finales.
│   │   │   ├── CheckoutSummary.tsx                 # Resumen de orden y descuentos aplicados (React).
│   │   │   └── styles/                             # Estilos del flujo de checkout.
│   │   │       ├── CheckoutForm.module.css         # Diseño del formulario de facturación.
│   │   │       └── CheckoutSummary.module.css      # Estética del resumen lateral de orden.
│   │   ├── common/                                 # Componentes transversales del sistema.
│   │   │   ├── ConfirmationModal.astro             # Ventana emergente de confirmación UI.
│   │   │   ├── LoadingSpinner.test.tsx             # Test del componente de carga global.
│   │   │   ├── LoadingSpinner.tsx                  # Animación premium de espera asíncrona.
│   │   │   ├── Notifications.test.tsx              # Test del sistema de avisos Sileo.
│   │   │   ├── Notifications.tsx                   # UI de notificaciones estilo push interactiva.
│   │   │   ├── PageCard.astro                      # Contenedor Glassmorphism para vistas centradas.
│   │   │   └── styles/                             # Estilos comunes modulares.
│   │   │       ├── ConfirmationModal.module.css    # Diseño del modal de confirmación.
│   │   │       ├── LoadingSpinner.module.css       # Animación neón del spinner.
│   │   │       └── PageCard.module.css             # Estética Glassmorphism de las tarjetas.
│   │   ├── products/                               # Dominio del catálogo de productos.
│   │   │   ├── ActiveFilters.astro                 # Tags interactivos de filtrado activo.
│   │   │   ├── AddToCartButton.test.tsx            # Test del botón de acción principal.
│   │   │   ├── AddToCartButton.tsx                 # Lógica de adición al carrito (React).
│   │   │   ├── AddToCartModal.test.tsx             # Test del modal de éxito de adición.
│   │   │   ├── AddToCartModal.tsx                  # Modal transicional de producto añadido (React).
│   │   │   ├── FeaturedProducts.astro              # Grilla de destacados para el home.
│   │   │   ├── FilterButton.astro                  # Disparador del modal de filtros neón.
│   │   │   ├── FilterModal.astro                   # Panel de filtrado avanzado por marcas/precio.
│   │   │   ├── ProductCard.astro                   # Tarjeta individual con efectos térmicos.
│   │   │   ├── ProductCarousel.astro               # Motor de carrusel interactivo neón.
│   │   │   ├── ProductControls.astro               # Barra de ordenamiento y visualización.
│   │   │   ├── SortSelect.astro                    # Selector de ordenamiento selectivo.
│   │   │   └── styles/                             # Estilos del dominio de productos.
│   │   │       ├── ActiveFilters.module.css        # Diseño de tags de filtros activos.
│   │   │       ├── AddToCartModal.module.css       # Estética neón del modal de carrito.
│   │   │       ├── FeaturedProducts.module.css     # Layout de la sección de destacados.
│   │   │       ├── ProductCard.module.css          # Efectos hover y bordes térmicos neón.
│   │   │       ├── ProductCarousel.module.css      # Configuración visual del slider neón.
│   │   │       └── controls.module.css             # Estilos de la barra de herramientas.
│   │   └── promotions/                             # Gestión de campañas visuales.
│   │       ├── PromotionHero.astro                 # Banner interactivo de grandes ofertas.
│   │       └── styles/                             # Estética de las promociones.
│   │           └── PromotionHero.module.css        # Animaciones y gradientes del hero.
│   ├── layouts/                                    # Wrapper y estructuras base.
│   │   ├── AdminLayout.astro                       # Esqueleto de visualización para páginas /admin.
│   │   ├── Footer.astro                            # Pie de página responsivo y legal.
│   │   ├── Layout.astro                            # Estructura HTML5 inicial (SEO & Tipografía).
│   │   ├── Navbar.astro                            # Navegación jerárquica con buscador unificado.
│   │   └── styles/                                 # Estilos de la estructura envolvente.
│   │       ├── Footer.module.css                   # Diseño del pie de página.
│   │       └── Navbar.module.css                   # Estética de la barra de navegación fija.
│   ├── lib/                                        # Utilidades y configuración de librerías.
│   │   ├── api.test.ts                             # Test de interceptores del cliente Ky.
│   │   ├── api.ts                                  # Cliente fetch centralizado con Auto-Refresh.
│   │   ├── dataReset.test.ts                       # Test de lógica de limpieza de caché.
│   │   └── dataReset.ts                            # Herramientas de sincronización con el seed.
│   ├── pages/                                      # Sistema de rutas basado en archivos (SSR).
│   │   ├── about.astro                             # Página de información institucional.
│   │   ├── admin/                                  # Panel privado de monitoreo de negocio.
│   │   │   ├── dashboard.astro                     # Dashboard con métricas y tendencias reales.
│   │   │   └── styles/                             # Estética del panel administrativo.
│   │   │       └── dashboard.module.css            # Diseño premium del dashboard.
│   │   ├── api/                                    # Puntos de conexión internos del servidor.
│   │   ├── cart.astro                              # Vista completa del carrito de compras.
│   │   ├── checkout/                               # Rutas del proceso de pago.
│   │   │   ├── failure.astro                       # Vista informativa de pago fallido.
│   │   │   ├── success.astro                       # Vista de confirmación de compra exitosa.
│   │   │   └── styles/                             # Estilos del checkout.
│   │   │       ├── failure.module.css              # Estética visual del error.
│   │   │       └── success.module.css              # Diseño premium de la confirmación.
│   │   ├── checkout.astro                          # Página maestra de finalización de orden.
│   │   ├── coming-soon.astro                       # Placeholder para secciones en desarrollo.
│   │   ├── contacto.astro                          # Formulario de ayuda y soporte técnico.
│   │   ├── faq.astro                               # Centro de respuestas y preguntas frecuentes.
│   │   ├── index.astro                             # Home page y portal de entrada.
│   │   ├── login.astro                             # Portal de ingreso de usuario.
│   │   ├── new-arrivals.astro                      # Listado dinámico de novedades del mes.
│   │   ├── offers.astro                            # Catálogo exclusivo de rebajas actuales.
│   │   ├── orders/                                 # Post-compra y seguimiento de órdenes.
│   │   │   ├── index.astro                         # Historial completo de compras del usuario.
│   │   │   ├── [id].astro                          # Detalle técnico de una compra específica.
│   │   │   └── styles/                             # Estética del historial.
│   │   │       ├── order-detail.module.css         # Diseño del desglose de orden.
│   │   │       └── orders-list.module.css          # Estructura del listado de historial.
│   │   ├── productos/                              # Catálogo dinámico e interactivo.
│   │   │   ├── [id].astro                          # Ficha técnica individual de producto (PDP).
│   │   │   └── styles/                             # Estética de la ficha de producto.
│   │   │       └── [id].module.css                 # Diseño detallado de la página de producto.
│   │   ├── profile.astro                           # Centro de gestión de cuenta de usuario.
│   │   ├── register.astro                          # Formulario de creación de cuenta neón.
│   │   ├── search.astro                            # Resultados de búsqueda con filtros dinámicos.
│   │   ├── styles/                                 # Módulos CSS de páginas específicas.
│   │   │   ├── about.module.css
│   │   │   ├── coming-soon.module.css
│   │   │   ├── contacto.module.css
│   │   │   ├── faq.module.css
│   │   │   ├── index.module.css
│   │   │   ├── login.module.css
│   │   │   ├── profile.module.css
│   │   │   ├── register.module.css
│   │   │   ├── search.module.css
│   │   │   └── terminos.module.css
│   │   └── terminos.astro                          # Documentación legal y términos de uso.
│   ├── scripts/                                    # Lógica interactiva cliente (Islands logic).
│   │   ├── auth-login.test.ts                      # Test de validación de credenciales.
│   │   ├── auth-login.ts                           # Lógica de login y manejo de tokens.
│   │   ├── auth-register.test.ts                   # Test de validación de registro.
│   │   ├── auth-register.ts                        # Lógica de creación de cuentas y Captcha.
│   │   ├── carousel.test.ts                        # Test de mecánica del slider.
│   │   ├── carousel.ts                             # Animaciones del carrusel neón.
│   │   ├── checkout-failure.test.ts                # Test de flujo de error.
│   │   ├── checkout-failure.ts                     # Lógica visual tras falla de pago.
│   │   ├── checkout-success.test.ts                # Test de flujo de éxito.
│   │   ├── checkout-success.ts                     # Lógica de limpieza y confeti post-compra.
│   │   ├── contact.test.ts                         # Test de validación de formulario.
│   │   ├── contact.ts                              # Lógica de envío de tickets de soporte.
│   │   ├── filter-modal.test.ts                    # Test de apertura/cierre de modal.
│   │   ├── filter-modal.ts                         # Lógica interactiva de filtros avanzados.
│   │   ├── navbar.test.ts                          # Test de búsqueda y menús fijos.
│   │   ├── navbar.ts                               # Navegación y búsqueda predictiva CLIENT-SIDE.
│   │   ├── order-detail.test.ts                    # Test de visualización de ítems.
│   │   ├── order-detail.ts                         # Lógica interactiva de detalle de orden.
│   │   ├── orders-list.test.ts                     # Test de paginación de órdenes.
│   │   ├── orders-list.ts                          # Inyectado dinámico del historial de compras.
│   │   ├── profile.test.ts                         # Test de edición de perfil.
│   │   ├── profile.ts                              # Lógica de gestión de datos de cuenta.
│   │   ├── promotion-hero.test.ts                  # Test de animación del hero.
│   │   ├── promotion-hero.ts                       # Control de diapositivas de la sección hero.
│   │   ├── search-filters.test.ts                  # Test de sincronización de filtros.
│   │   ├── search-filters.ts                       # Coordinación de estados UI de búsqueda.
│   │   ├── user-dropdown.test.ts                   # Tests del componente menú de opciones de usuario.
│   │   └── user-dropdown.ts                        # Lógica interactiva del menú de opciones y vistas de rol.
│   ├── services/                                   # Abstracción de llamadas a la API (Business Logic).
│   │   ├── admin.service.test.ts                   # Test de obtención de estadísticas.
│   │   ├── admin.service.ts                        # Integración con endpoints administrativos.
│   │   ├── auth.service.test.ts                    # Test unitario de autenticación global.
│   │   ├── auth.service.ts                         # Gestión central de login/logout/tokens.
│   │   ├── brand.service.test.ts                   # Test de listado de marcas.
│   │   ├── brand.service.ts                        # Catálogo de editoriales registradas.
│   │   ├── category.service.test.ts                # Test de árbol de categorías.
│   │   ├── category.service.ts                     # Estructura jerárquica de navegación.
│   │   ├── filter.service.test.ts                  # Test de normalización de filtros.
│   │   ├── filter.service.ts                       # Adaptador de parámetros de búsqueda.
│   │   ├── product.service.test.ts                 # Test unitario de catálogo.
│   │   ├── product.service.ts                      # Gestión de productos, filtros y búsqueda.
│   │   ├── promotion.service.test.ts               # Test de campañas activas.
│   │   ├── promotion.service.ts                    # Obtención de banners y descuentos.
│   │   ├── purchase.service.test.ts                # Test unitario de órdenes.
│   │   ├── purchase.service.ts                     # Gestión de transacciones y estados.
│   │   ├── subcategory.service.test.ts             # Test de subcategorías específicas.
│   │   ├── subcategory.service.ts                  # Clasificación secundaria del catálogo.
│   │   ├── support.service.test.ts                 # Test de envío de mensajes.
│   │   ├── support.service.ts                      # Enlace con el módulo de ayuda.
│   │   ├── user.service.test.ts                    # Test unitario de data de perfil.
│   │   └── user.service.ts                         # Obtención y actualización de perfiles.
│   ├── store/                                      # Gestión de estado reactivo global (Nanostores).
│   │   ├── adminStore.test.ts                      # Tests unitarios del estado de entorno de administración.
│   │   ├── adminStore.ts                           # Estado de persistencia nativo para vista binaria.
│   │   ├── cartStore.test.ts                       # Test de persistencia y sumatorias.
│   │   ├── cartStore.ts                            # Estado atomizado del carrito de compras.
│   │   ├── checkoutStore.test.ts                   # Test de validación de pago.
│   │   ├── checkoutStore.ts                        # Coordinador del flujo persistente de pago.
│   │   ├── promotionEngine.test.ts                 # Test de lógica de descuentos neón.
│   │   └── promotionEngine.ts                      # Motor de cálculo complejo de promociones.
│   ├── styles/                                     # Sistema de diseño y variables globales.
│   │   ├── globals.css                             # Tokens neón, tipografía y resets globales.
│   │   └── main.css                                # Reglas base y utilidades de estilo.
│   ├── types/                                      # Definiciones estrictas de TypeScript (Domain).
│   │   ├── admin.types.ts                          # Tipos de métricas y dashboard admin.
│   │   ├── auth.types.ts                           # Tipos de sesión, JWT e inputs auth.
│   │   ├── brand.types.ts                          # Esquema de marcas y logotipos.
│   │   ├── cart.types.ts                           # Estructura de ítems y estado del carrito.
│   │   ├── category.types.ts                       # Definición de árbol de categorías.
│   │   ├── checkout.types.ts                       # Tipos de facturación, envío y pago.
│   │   ├── common.types.ts                         # Errores, paginación y respuestas API.
│   │   ├── product.types.ts                        # Atributos de producto y variantes.
│   │   ├── promotion.types.ts                      # Esquema de banners y tipos de rebaja.
│   │   ├── purchase.types.ts                       # Definición de órdenes y transacciones.
│   │   ├── subcategory.types.ts                    # Interfaces de clústeres secundarios.
│   │   ├── support.types.ts                        # Estructura de tickets de contacto.
│   │   └── user.types.ts                           # Perfil, roles y atributos de usuario.
│   └── env.d.ts                                    # Tipado estricto para variables de entorno.
├── playwright.config.ts                            # Configuración de tests E2E con Playwright.
├── package.json                                    # Scripts, metadata y dependencias (pnpm).
└── README.md                                       # Documentación principal del frontend.
</code></pre>

<hr>

<h2>📚 Skills y Directrices</h2>
<p>Este proyecto se rige por un conjunto de reglas arquitectónicas y de calidad de código denominadas <b>Skills</b>. Podés consultar el catálogo completo en:</p>
<ul>
    <li><b><a href=".agent/skills/global-skills/SKILL.md">Global Skills Catalog (Frontend)</a></b></li>
    <li><b><a href=".agent/skills/test-enforcement/SKILL.md">Test Enforcement Rule</a></b></li>
</ul>
<p>Las directrices más críticas incluyen:</p>
<ul>
    <li><code>css-modules</code>: Todo CSS complejo debe vivir en su propio archivo modular.</li>
    <li><code>test-enforcement</code>: Regla obligatoria de "Un test por archivo" para componentes y servicios.</li>
    <li><code>astro-scripts</code>: La lógica compleja de scripts debe extraerse de los archivos Astro.</li>
</ul>

<hr>

<h2>🧪 Testing y Calidad</h2>
<p>
  El frontend de <b>MarketFlex</b> implementa una estrategia de prueba robusta y dual, diseñada para garantizar que tanto la lógica de negocio interna como la experiencia del usuario final sean impecables.
</p>

<ul>
  <li><b>🛡️ Unit Testing: Cobertura Total de Componentes</b>
    <p>Nuestra arquitectura de testing garantiza que ningún fragmento de lógica de negocio o interacción visual llegue a producción sin ser validado. Contamos con una cobertura del 100% en todos los dominios críticos del sistema:</p>
    <table>
      <thead>
        <tr>
          <th>Categoría</th>
          <th>Pruebas Destacadas</th>
          <th>Objetivo de la Prueba</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><b>React Components (UI)</b></td>
          <td><code>CartView</code>, <code>CheckoutForm</code>, <code>CheckoutSummary</code>, <code>AddToCartButton</code>, <code>AddToCartModal</code>, <code>Notifications</code>, <code>LoadingSpinner</code></td>
          <td>Valida el renderizado correcto, estados de carga, errores y comportamiento de los componentes interactivos de React.</td>
        </tr>
        <tr>
          <td><b>Core Interactive Logic</b></td>
          <td><code>auth-login</code>, <code>auth-register</code>, <code>navbar</code>, <code>carousel</code>, <code>order-detail</code>, <code>orders-list</code>, <code>search-filters</code>, <code>promotion-hero</code></td>
          <td>Asegura el funcionamiento de la lógica de cliente extraída de los archivos Astro (Manejo de DOM, Eventos, Animaciones).</td>
        </tr>
        <tr>
          <td><b>State & Engines</b></td>
          <td><code>checkoutStore</code>, <code>promotionEngine</code></td>
          <td>Pruebas de alta complejidad sobre el motor de cálculo de descuentos y la coordinación del flujo de compra.</td>
        </tr>
        <tr>
          <td><b>API & Infra Services</b></td>
          <td><code>auth.service</code>, <code>product.service</code>, <code>purchase.service</code>, <code>category.service</code>, <code>filter.service</code>, <code>brand.service</code></td>
          <td>Verifica la comunicación con el backend, transformación de datos y el sistema de Auto-Refresh de tokens JWT.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><b>🎭 Pruebas E2E (End-to-End):</b> Implementadas con <a href="https://playwright.dev/">Playwright</a>. Estas pruebas simulan el comportamiento real del usuario en navegadores modernos, validando integraciones complejas que los tests unitarios no pueden capturar.</li>
  <li><b>🔗 Mocking de API:</b> Mediante Mock Service Worker (MSW), simulamos el comportamiento del backend para realizar pruebas deterministas y rápidas sin depender de una base de datos real.</li>
</ul>

<hr>

<h3>🎭 Playwright E2E: El Flujo Maestro</h3>
<p>
  La joya de nuestra corona en testing es el <code>marketflex.spec.ts</code>. Este test no solo verifica que la página cargue, sino que ejecuta el <b>"Foundational Flow"</b> del negocio, asegurando que un cliente pueda completar su propósito de principio a fin.
</p>

<table>
  <thead>
    <tr>
      <th>Fase</th>
      <th>Descripción del Test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><b>1. Autenticación</b></td>
      <td>Navega al login, ingresa credenciales y verifica el mensaje de bienvenida dinámico.</td>
    </tr>
    <tr>
      <td><b>2. Descubrimiento</b></td>
      <td>Explora la sección de ofertas, selecciona un producto real y navega a su ficha técnica (PDP).</td>
    </tr>
    <tr>
      <td><b>3. Interacción</b></td>
      <td>Agrega el producto al carrito y verifica la notificación visual de éxito (Sileo).</td>
    </tr>
    <tr>
      <td><b>4. Transacción</b></td>
      <td>Revisa el carrito, completa el formulario de checkout con validación en tiempo real y confirma la compra.</td>
    </tr>
    <tr>
      <td><b>5. Fidelización</b></td>
      <td>Verifica la página de éxito, navega al historial de "Mis Compras" y valida que el detalle de la orden recién creada sea correcto.</td>
    </tr>
  </tbody>
</table>

<h3>Comandos de Test</h3>
<pre>
# 🧪 Ejecutar tests unitarios (Servicios y Scripts)
pnpm test
# 🎭 Ejecutar suite E2E completa (Modo Headed)
pnpm run test:e2e
# 🛠️ Abrir el Playwright Test Runner (Interfaz UI Interactiva)
pnpm run test:e2e:ui
</pre>

<hr>

<h2>📜 Comandos Disponibles</h2>
<p>En el directorio del proyecto, puedes ejecutar los siguientes comandos:</p>
<ul>
    <li><code>pnpm dev</code>: Inicia el servidor de desarrollo en <code>localhost:2611</code> (incluye HTTPS local con <code>mkcert</code>).</li>
    <li><code>pnpm build</code>: Compila la aplicación para producción. Optimiza todos los recursos y finaliza la construcción SSR (Server-Side Rendering).</li>
    <li><code>pnpm preview</code>: Levanta un servidor Node local para visualizar la versión compilada de producción antes de desplegarla.</li>
</ul>

<hr>

<h2>🔐 Variables de Entorno</h2>
<p>Crea un archivo <code>.env</code> en la raíz del proyecto con las siguientes variables:</p>
<pre>
PORT=2611
PUBLIC_API_URL=http://localhost:5979/api
PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
PUBLIC_FACEBOOK_APP_ID=your_facebook_app_id
PUBLIC_RECAPTCHA_SITE_KEY=your_recaptcha_site_key
</pre>

<h2>🚀 Instalación</h2>
<pre>
git clone https://github.com/agussantinelli/MarketFlex-FrontEnd.git
cd MarketFlex-FrontEnd
pnpm install
pnpm dev
</pre>

<hr>

<h2 align="left">⚖️ Licencia y Propiedad Intelectual</h2>

<p align="left">
  Este proyecto es <b>propiedad intelectual privada</b> de Agustín Santinelli. No se otorga ninguna licencia de uso abierto. Puedes consultar los términos detallados en el archivo 
  <a href="LICENSE"><code>LICENSE</code></a> incluido en este repositorio.
</p>

<p align="left">
  <i>
    ⚠️ <b>Restricción Firme:</b> Queda terminantemente prohibida la copia, reproducción, distribución o modificación de este código sin autorización expresa del autor. Este repositorio se publica exclusivamente como exhibición de portafolio profesional.
  </i>
</p>
<hr />

<h2 align="left">🚫 Copyright Total</h2>

<p align="left">
  Este proyecto es propiedad intelectual exclusiva de <b>Agustín Santinelli</b>. No se aceptan contribuciones externas o forks para su uso público sin previo acuerdo por escrito.
</p>

<p align="left">
  Si tienes sugerencias directas o deseas explorar colaboraciones comerciales, por favor contacta al autor: 
  <a href="mailto:agustinsantinelli@gmail.com">agustinsantinelli@gmail.com</a>.
</p>

<hr />

<p align="center">
  Desarrollado con mucho ❤️ y 🧉 por <a href="https://github.com/agussantinelli">Agus Santinelli</a>
</p>
