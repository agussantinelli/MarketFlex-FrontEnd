<h1 align="center">🚀 MarketFlex - FrontEnd</h1>

<p align="center">
    <a href="https://github.com/agussantinelli/MarketFlex-FrontEnd" target="_blank">
        <img src="https://img.shields.io/badge/🚀%20Repo%20Frontend%20(Estás%20Aquí)-Astro-BC52EE?style=for-the-badge&logo=astro&logoColor=white" alt="Frontend Repo Badge"/>
    </a>
    <a href="https://github.com/agussantinelli/MarketFlex-BackEnd" target="_blank">
        <img src="https://img.shields.io/badge/⚙️%20Repo%20Backend-Node.js%20%26%20Hono-E0234E?style=for-the-badge&logo=hono&logoColor=white" alt="Backend Repo Badge"/>
    </a>
    <a href="https://github.com/agussantinelli" target="_blank">
        <img src="https://img.shields.io/badge/👤%20Contacto-agussantinelli-000000?style=for-the-badge&logo=github&logoColor=white" alt="Contact Badge"/>
    </a>
</p>

<div align="center">
    <img src="https://img.shields.io/badge/Astro-5.17.1-BC52EE?style=for-the-badge&logo=astro&logoColor=white" alt="Astro Badge">
    <img src="https://img.shields.io/badge/React-19.2.4-61DAFB?style=for-the-badge&logo=react&logoColor=white" alt="React Badge">
    <img src="https://img.shields.io/badge/Sileo-Notifications-FFD700?style=for-the-badge&logo=vlc&logoColor=black" alt="Sileo Badge">
    <img src="https://img.shields.io/badge/TypeScript-5.9.3-3178C6?style=for-the-badge&logo=typescript&logoColor=white" alt="TS Badge">
    <img src="https://img.shields.io/badge/OpenAPI-Consuming-6BA539?style=for-the-badge&logo=openapiinitiative&logoColor=white" alt="OpenAPI Badge">
    <img src="https://img.shields.io/badge/Zustand-State-764ABC?style=for-the-badge&logo=zustand&logoColor=white" alt="Zustand Badge">
    <img src="https://img.shields.io/badge/Nanostores-React-3178C6?style=for-the-badge&logo=nanostores&logoColor=white" alt="Nanostores Badge">
    <img src="https://img.shields.io/badge/pnpm-10+-F69220?style=for-the-badge&logo=pnpm&logoColor=white" alt="pnpm Badge">
    <img src="https://img.shields.io/badge/Ky-1.14.3-FF4081?style=for-the-badge&logo=ky&logoColor=white" alt="Ky Badge">
    <img src="https://img.shields.io/badge/Lucide-Icons-F56565?style=for-the-badge&logo=lucide&logoColor=white" alt="Lucide Badge">
    <img src="https://img.shields.io/badge/React--Icons-Librería-E91E63?style=for-the-badge&logo=react&logoColor=white" alt="React-Icons Badge">
    <img src="https://img.shields.io/badge/Google_Sign--In-GSI-4285F4?style=for-the-badge&logo=google&logoColor=white" alt="Google Sign-In Badge">
    <img src="https://img.shields.io/badge/Facebook_Login-SDK-1877F2?style=for-the-badge&logo=facebook&logoColor=white" alt="Facebook Login Badge">
    <img src="https://img.shields.io/badge/JWT-Auth-black?style=for-the-badge&logo=jsonwebtokens&logoColor=white" alt="JWT Badge">
    <img src="https://img.shields.io/badge/reCAPTCHA-v3-4285F4?style=for-the-badge&logo=google&logoColor=white" alt="reCAPTCHA Badge">
    <img src="https://img.shields.io/badge/HTTPS-mkcert-003666?style=for-the-badge&logo=letsencrypt&logoColor=white" alt="mkcert Badge">
    <img src="https://img.shields.io/badge/Vite-6.x-646CFF?style=for-the-badge&logo=vite&logoColor=white" alt="Vite Badge">
    <img src="https://img.shields.io/badge/Vitest-4.0.18-6E9F18?style=for-the-badge&logo=vitest&logoColor=white" alt="Vitest Badge">
    <img src="https://img.shields.io/badge/MSW-2.x-FF6A00?style=for-the-badge&logo=mockserviceworker&logoColor=white" alt="MSW Badge">
    <img src="https://img.shields.io/badge/Playwright-1.58.2-2EAD33?style=for-the-badge&logo=playwright&logoColor=white" alt="Playwright Badge">
    <img src="https://img.shields.io/badge/Test_Enforcement-Mandatory-orange?style=for-the-badge&logo=vitest&logoColor=white" alt="Test Enforcement Badge">
</div>

<div align="center">
    <a href="https://drive.google.com/drive/folders/1qDvPJkxC14DdE-JEqHtvR_LL-ULDbvRL" target="_blank">
        <img src="https://img.shields.io/badge/📂%20Drive%20Documentación-4285F4?style=for-the-badge&logo=googledrive&logoColor=white" alt="Drive Docs Badge"/>
    </a>
</div>

<div align="center">
  <img src="https://img.shields.io/badge/Copyright-All_Rights_Reserved-red?style=for-the-badge&logo=copyright&logoColor=white" alt="Copyright Badge"/>
</div>
<hr>

<h2>🌀 El Factor Flex: Adaptabilidad Sin Límites</h2>
<p align="center">
  <i>"Un solo núcleo, infinitas posibilidades."</i>
</p>
<p>
  Lo más importante de <b>MarketFlex</b> es su capacidad de metamorfosis. La arquitectura está diseñada para que la interfaz pueda ser adaptada a <b>marketplaces con orientaciones completamente distintas</b> sin reescribir la lógica base. 
  <br><br>
  Desde un retail de moda hasta una plataforma de servicios profesionales o un mercado de coleccionables digitales; la UI se amolda a la naturaleza del producto.
</p>


<hr>

<h2>🛠️ Stack Tecnológico</h2>
<table>
    <thead>
        <tr>
            <th>Componente</th>
            <th>Tecnología</th>
            <th>Versión / Detalle</th>
            <th>Uso Principal</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Framework</strong></td>
            <td>Astro</td>
            <td><strong>^5.17.1</strong></td>
            <td>Arquitectura de islas, rendimiento y routing.</td>
        </tr>
        <tr>
            <td><strong>Lenguaje</strong></td>
            <td>TypeScript</td>
            <td><strong>5.x</strong></td>
            <td>Tipado estricto para componentes y lógica de negocio.</td>
        </tr>
        <tr>
            <td><strong>Estilos</strong></td>
            <td>CSS Modules (Scoped)</td>
            <td>.module.css</td>
            <td>Estilizado modular con aislamiento automático por componente.</td>
        </tr>
        <tr>
            <td><strong>E2E Testing</strong></td>
            <td>Playwright</td>
            <td><strong>Latest</strong></td>
            <td>Pruebas de punta a punta en navegadores reales.</td>
        </tr>
        <tr>
            <td><strong>Unit Testing</strong></td>
            <td>Vitest</td>
            <td><strong>^4.0.18</strong></td>
            <td>Pruebas unitarias ultrarrápidas para servicios.</td>
        </tr>
        <tr>
            <td><strong>Mocking</strong></td>
            <td>MSW (Mock Service Worker)</td>
            <td><strong>^2.12.10</strong></td>
            <td>Intercepción de red para pruebas deterministas.</td>
        </tr>
        <tr>
            <td><strong>Component Testing</strong></td>
            <td>React Testing Library</td>
            <td><strong>^16.3.2</strong></td>
            <td>Pruebas de comportamiento para componentes React.</td>
        </tr>
        <tr>
            <td><strong>Paquetes</strong></td>
            <td>pnpm</td>
            <td><strong>Latest</strong></td>
            <td>Gestión de dependencias eficiente y veloz.</td>
        </tr>
        <tr>
            <td><strong>Componentes</strong></td>
            <td>Astro Components</td>
            <td>.astro</td>
            <td>Componentes de servidor (SSR/SSG) por defecto.</td>
        </tr>
        <tr>
            <td><strong>Integración</strong></td>
            <td>Ky</td>
            <td><strong>^1.14.3</strong></td>
            <td>Consumo de la API Backend (ligero y moderno).</td>
        </tr>
        <tr>
            <td><strong>Iconos</strong></td>
            <td>astro-icon, Lucide & react-icons</td>
            <td><strong>Latest</strong></td>
            <td>Iconografía SVG optimizada, librerías modernas para React y animaciones.</td>
        </tr>
        <tr>
            <td><strong>Tipografía</strong></td>
            <td>@fontsource/inter</td>
            <td><strong>Latest</strong></td>
            <td>Gestión de fuentes local (sin llamadas externas).</td>
        </tr>
        <tr>
            <td><strong>Notificaciones</strong></td>
            <td>Sileo</td>
            <td><strong>^0.1.1</strong></td>
            <td>Sistema de avisos visuales con efectos "gooey".</td>
        </tr>
        <tr>
            <td><strong>UI Framework</strong></td>
            <td>React</td>
            <td><strong>^19.2.4</strong></td>
            <td>Soporte para componentes interactivos y librerías externas.</td>
        </tr>
        <tr>
            <td><strong>DX Tools</strong></td>
            <td>Astro Check</td>
            <td><strong>^0.9.6</strong></td>
            <td>Validación estática y visualización de errores de Astro.</td>
        </tr>
        <tr>
            <td><strong>Auth Social</strong></td>
            <td>Google Sign-In (GSI)</td>
            <td><strong>Latest</strong></td>
            <td>Inicio de sesión con cuenta de Google (Identity Services).</td>
        </tr>
        <tr>
            <td><strong>Auth Social</strong></td>
            <td>Facebook Login SDK</td>
            <td><strong>v21.0</strong></td>
            <td>Inicio de sesión con cuenta de Facebook (JS SDK).</td>
        </tr>
        <tr>
            <td><strong>Seguridad</strong></td>
            <td>JWT & Refresh Tokens</td>
            <td><strong>Auto-Refresh</strong></td>
            <td>Renovación automática de sesión interceptada vía Ky.</td>
        </tr>
        <tr>
            <td><strong>Anti-Bot</strong></td>
            <td>reCAPTCHA v3</td>
            <td><strong>Invisible</strong></td>
            <td>Protección automática contra bots sin fricción para el usuario.</td>
        </tr>
        <tr>
            <td><strong>Herramientas</strong></td>
            <td>vite-plugin-mkcert</td>
            <td><strong>^1.17.9</strong></td>
            <td>Generación de certificados SSL (HTTPS Local) para OAuth.</td>
        </tr>
        <tr>
            <td><strong>Estado Global</strong></td>
            <td>Zustand & Nanostores</td>
            <td><strong>Latest</strong></td>
            <td>Gestión de estado global para React Islands y compartida entre frameworks (Astro/React).</td>
        </tr>
    </tbody>
</table>

<hr>

<h2>📦 Características Principales</h2>
<ul>
  <li>✨ <b>Re-branding Instantáneo:</b> Estructura preparada para cambios visuales profundos.</li>
  <li>📱 <b>Mobile First:</b> Diseño nacido para dispositivos móviles, escalable a grandes pantallas.</li>
  <li>🪙 <b>UX Agnóstica:</b> Flujos de usuario optimizados para cualquier tipo de transaccionalidad.</li>
  <li>⚡ <b>Performance:</b> Carga asíncrona optimizada para catálogos de cualquier escala.</li>
  <li>🔢 <b>Paginación Tradicional:</b> Navegación basada en URL para una mejor indexación (SEO) y accesibilidad.</li>
  <li>🏝️ <b>Arquitectura de Islas:</b> Hidratación selectiva de componentes para tiempos de respuesta inmediatos.</li>
  <li>🔼 <b>Navbar Jerárquico:</b> Navegación inteligente con subcategorías anidadas, triggers de flecha y sistema de "hover delay" (2s) para una experiencia fluida.</li>
  <li>🎡 <b>CSS Modules:</b> Aislamiento total de estilos mediante archivos <code>.module.css</code> localizados por componente/página.</li>
  <li>🎠 <b>Carruseles Premium:</b> Componente reutilizable de carrusel con estados interactivos (flechas que cambian de color al límite del scroll) y efectos premium.</li>
  <li>🧱 <b>Arquitectura Modular:</b> Separación estricta de Tipos, Servicios y Componentes para mantenibilidad a largo plazo.</li>
  <li>🌐 <b>Login Social:</b> Inicio de sesión con Google (GSI) y Facebook (JS SDK) con creación automática de cuenta y mensajes de bienvenida diferenciados.</li>
  <li>🤖 <b>Anti-Bot (reCAPTCHA v3):</b> Protección invisible contra bots activada durante el registro para garantizar transacciones legítimas.</li>
  <li>👤 <b>Perfil de Usuario Premium:</b> Página de perfil con diseño de mini-cards altamente visuales y organización de información por grupos de interés.</li>
  <li>🌙 <b>Dark Mode Nativo:</b> Implementación de tema oscuro profundo con efectos de <i>glassmorphism</i>, desenfoques y transparencias que realzan la estética premium en toda la plataforma.</li>
  <li>🛒 <b>Premium Shopping Cart:</b> Rediseño profundo del carrito con:
      <ul>
          <li><b>Glassmorphism Avanzado:</b> Desenfoques de alta densidad (25px) y bordes con brillo sutil.</li>
          <li><b>Layout Asimétrico:</b> Estructura de tarjetas de producto moderna y dinámica.</li>
          <li><b>Quantity Pills:</b> Controles de cantidad minimalistas y elegantes.</li>
          <li><b>Micro-animaciones:</b> Efectos de rotación en iconos de eliminación y escalado suave en imágenes.</li>
      </ul>
  </li>
  <li>🧮 <b>Motor de Promociones Inteligente:</b> Refactorización de la lógica de descuentos (`Individual-First`) que garantiza una aplicación justa de ofertas como 2x1 o Descuento en 2da Unidad, priorizando el ahorro en productos de mayor valor.</li>
  <li>🏷️ <b>Social Badges Oficiales:</b> Integración de insignias de marca para Google y Facebook con sus colores corporativos e iconografía oficial.</li>
  <li>🔒 <b>Confirmación de Acciones:</b> Modal premium interactivo para acciones críticas (ej. logout) mejorando la seguridad percibida.</li>
  <li>✨ <b>Página de Novedades Dedicada:</b> Nueva sección en <code>/new-arrivals</code> que muestra los últimos lanzamientos con soporte completo de paginación y navegación fluida.</li>
  <li>🚀 <b>Promotion Hero Section:</b> Banner dinámico para destacar ofertas especiales con enlaces directos a contextos filtrados.</li>
  <li>🏷️ <b>Offers Dashboard (<code>/offers</code>):</b> Página dedicada a promociones con soporte para descripciones dinámicas y paginación propia.</li>
  <li>🔍 <b>Filtros de Marca (Editoriales):</b> Nuevo sistema de filtrado multi-selección para marcas con estados colapsables, sincronización con URL y persistencia en el buscador.</li>
  <li>🔒 <b>Filtros Fijos (<code>fixedKeys</code>):</b> Sistema que permite bloquear ciertos filtros (ej. una promoción específica o categoría fija) para preservar el contexto de navegación.</li>
  <li>🔍 <b>Modo "Explorar":</b> Activación inteligente de filtros globales y selectores de promociones cuando se accede desde links de navegación general.</li>
  <li>🔔 <b>Notificaciones:</b> Sistema de avisos visuales con efectos "gooey" mediante Sileo (React).</li>
  <li>🔒 <b>HTTPS en Desarrollo:</b> Certificado SSL local confiable (generado con <code>vite-plugin-mkcert</code>) requerido para cumplir requisitos de SDKs externos (como Facebook) sin advertencias del navegador.</li>
  <li>🧪 <b>100% Logic Coverage:</b> Todos los scripts interactivos en <code>src/scripts</code> y servicios de comunicación cuentan con tests unitarios robustos (<b>115 tests en total</b>), garantizando la fiabilidad de la UI y la sesión.</li>
  <li>🛒 <b>Premium Checkout Experience:</b> Proceso de compra fluido con:
      <ul>
          <li><b>Multi-Sección:</b> División lógica entre Información Personal, Envío y Pago.</li>
          <li><b>Breadcrumbs Estilizados:</b> Navegación visual estilo píldora con iconos Lucide.</li>
          <li><b>Validación en Tiempo Real:</b> Feedback inmediato al usuario durante la carga de datos.</li>
          <li><b>Summary Dinámico:</b> Resumen de orden que refleja descuentos y promociones en tiempo real.</li>
+          <li><b>Pre-filling Inteligente:</b> Los campos de contacto y envío se auto-completan con la información del usuario logueado para una compra ultra-rápida.</li>
      </ul>
  </li>
  <li>🛡️ <b>Mocking de API (MSW):</b> Integración con Mock Service Worker para simular respuestas del backend en tests unitarios, permitiendo pruebas deterministas de interceptores y flujo de tokens.</li>
</ul>

<hr>

<h2>🏝️ Arquitectura de Componentes (Astro Islands)</h2>
<p>Este proyecto se enorgullece de ser súper rápido y eficiente al renderizar gracias a la implementación nativa de la <b>Arquitectura de Islas de Astro</b>. El patrón de diseño sigue estos principios rectores:</p>
<ul>
  <li><b>Modularización de Estilos (CSS Modules):</b> Siguiendo las directrices de la skill <code>css-modules</code>, todos los estilos complejos se extraen a archivos <code>.module.css</code> dentro de subdirectorios <code>styles/</code> locales al componente o página. Esto elimina colisiones de nombres y asegura que cada archivo de estilo solo afecte a su dueño.</li>
  <li><b>Esqueleto y Contenidos Estáticos (Astro Puro):</b> La inmensa mayoría de la UI (Barra de Navegación, Pie de Página, Tarjetas de Producto, e incluso la lógica pesada de <code>login.astro</code>) es renderizada en el servidor empleando exclusivamente componentes <code>.astro</code>. Esto expone un HTML súper ligero sin un gramo innecesario de JavaScript al cliente.</li>
  <li><b>Islas Interactivas (React):</b> Únicamente los micro-componentes que de verdad demandan reactividad o gestión de estado compleja en el cliente se escriben en React. El mejor ejemplo en este ecosistema es el sistema de notificaciones Sileo (<code>&lt;Notifications client:only="react" /&gt;</code>), que se hidrata de forma aislada sin afectar el rendimiento global del sitio restante.</li>
  <li><b>Cero Dependencias Obesas:</b> Separar de manera tan quirúrgica el contenido inerte del interactivo permite que el marketplace escale para manejar catálogos enormes sin comprometer jamás las métricas de carga del navegador o el TTI (<i>Time To Interactive</i>).</li>
</ul>

<hr>

<h2>🌐 Flujo de Datos y Consumo de API</h2>
<p>La comunicación con el backend (Hono/Node.js) se gestiona centralizadamente utilizando <b>Ky</b>, una librería cliente HTTP moderna y ligera basada en la API Fetch nativa. El corazón de este flujo se encuentra en <code>src/lib/api.ts</code>.</p>
<ul>
  <li><b>Instancia Centralizada:</b> Todos los servicios (como <code>auth.service.ts</code> o <code>product.service.ts</code>) utilizan la misma instancia pre-configurada de Ky. Esto garantiza consistencia en las URLs, headers comunes y tiempos de espera (<i>timeouts</i>).</li>
  <li><b>Intercepción de Salida (JWT):</b> Mediante un <i>hook</i> <code>beforeRequest</code>, la API inyecta automáticamente el encabezado <code>Authorization: Bearer [accessToken]</code>.</li>
  <li><b>Intercepción de Entrada (Auto-Refresh):</b> Se implementó un interceptor <code>afterResponse</code> que detecta errores <code>401 Unauthorized</code>. Si el token expiró, el interceptor solicita un nuevo par de tokens al backend usando el <code>marketflex_refresh_token</code> y reintenta la petición original de forma transparente para el usuario.</li>
</ul>

<hr>

<h2>🔔 Manejo de Estados y Notificaciones</h2>
<p>Dada la naturaleza estática principal de Astro, la comunicación de estados entre distintas páginas (por ejemplo, informar si un Login fue exitoso o falló tras una redirección) se resuelve de un modo limpio y sin estado global pesado:</p>
<ul>
  <li><b>Query Parameters como Estado:</b> La aplicación aprovecha activamente los parámetros de la URL (ej. <code>?error=true</code> o <code>?login_success=true&user=...</code>) para pasar contexto a la siguiente vista sin saturar el almacenamiento local o requerir librerías de estado complejas como Redux o Zustand.</li>
  <li><b>Notificaciones Reactivas (Sileo):</b> El componente de React <code>&lt;Notifications /&gt;</code> se inicializa verificando estos <i>query params</i>. Si detecta el parámetro requerido (ej. <code>requiredQueryParam="error"</code>), monta de inmediato el <i>toast notification</i> con animaciones "gooey" hermosas de la librería Sileo, proporcionando una experiencia reactiva instantánea sobre un esqueleto pre-renderizado.</li>
</ul>

<hr>

<h2>📑 Sistema de Paginación</h2>
<p>El marketplace utiliza un sistema de paginación tradicional basado en URL para el catálogo y resultados de búsqueda, lo que garantiza que los usuarios no pierdan su posición y puedan compartir enlaces a páginas específicas.</p>
<ul>
    <li><b>Navegación Persistente:</b> Los filtros de búsqueda, categorías y ordenamiento se preservan automáticamente al cambiar de página.</li>
    <li><b>Metadatos de Navegación:</b> Los usuarios reciben feedback claro sobre su ubicación (ej: <i>"Página 2 de 10, viendo 21-40 de 200 productos"</i>).</li>
    <li><b>UI Premium:</b> Componente de navegación con efecto <i>glassmorphism</i> y optimización responsive:
        <ul>
            <li><b>Desktop:</b> Barra horizontal completa con números y navegación directa.</li>
            <li><b>Mobile:</b> Diseño compacto con botones de navegación adyacentes ("Anterior/Siguiente") para una mejor usabilidad táctil.</li>
        </ul>
    </li>
</ul>

<hr>

<h2>🔐 Seguridad y Autenticación</h2>
<p>
  El sistema implementa múltiples capas de seguridad para proteger el acceso y los datos de los usuarios.
</p>
<ul>
  <li>
    <b>Sesiones Persistentes (Refresh Tokens):</b> Manejo seguro de sesiones duales. El <code>marketflex_token</code> (15 min) se usa para peticiones, mientras que el <code>marketflex_refresh_token</code> (7 días) permite renovar la sesión sin que el usuario tenga que volver a loguearse.
  </li>
  <li>
    <b>JWT (Json Web Tokens):</b> Los tokens se almacenan en <code>localStorage</code> con el prefijo <code>marketflex_</code> para evitar colisiones y se inyectan automáticamente en cada petición HTTP saliente.
  </li>
  <li>
    <b>Login Tradicional:</b> Formulario de email/contraseña con validación en tiempo real de complejidad (Mayúsculas, Números, Longitud) y persistencia en el backend.
  </li>
  <li>
    <b>reCAPTCHA v3 (Invisible):</b> Verificación automática de "humanidad" basada en comportamiento, eliminando la necesidad de seleccionar imágenes o checkboxes manuales.
  </li>
  <li>
    <b>Login Social — Google:</b> Integración con <b>Google Identity Services (GSI)</b>. El usuario hace click → popup de Google → se obtiene un <code>ID Token</code> → se verifica en el backend con <code>google-auth-library</code>.
  </li>
  <li>
    <b>Login Social — Facebook:</b> Integración con <b>Facebook JS SDK (v21.0)</b>. El usuario hace click → ventana de Facebook → se obtiene un <code>Access Token</code> → se verifica en el backend vía <code>Graph API</code>.
  </li>
  <li>
    <b>Creación automática de cuenta:</b> Si el usuario social no existe, se crea automáticamente. Si ya existe, se vincula. Se diferencia con mensajes: <b>"¡Bienvenido!"</b> vs <b>"Bienvenido de nuevo"</b>.
  </li>
  <li>
    <b>HTTPS en Desarrollo:</b> Uso de <code>vite-plugin-mkcert</code> para generar una Autoridad Certificadora (CA) local y certificados confiables. Esto elimina la advertencia de "Conexión no privada" en el navegador y es un requisito estricto del SDK de Facebook para <code>FB.login()</code>. <i>Nota: La primera vez que ejecutes <code>pnpm dev</code>, tu sistema operativo podría solicitar permisos de administrador para instalar la CA.</i>
  </li>
  <li>
    <b>Logos locales:</b> Los logos de Google y Facebook se sirven desde <code>public/logos/</code> para evitar dependencias externas.
  </li>
</ul>

<hr>

<h2>📁 Estructura del Proyecto</h2>

<pre><code>MarketFlex-FrontEnd/
├── .agent/                                         # Configuración del agente (skills)
├── .github/
│   └── workflows/                                  # Automatización con GitHub Actions (CI)
│       └── frontend-tests.yml                       # Workflow de testing unitario y E2E
├── .astro/                                         # Archivos generados por Astro
├── node_modules/                                   # Dependencias del proyecto
├── public/                                         # Archivos estáticos
│   ├── background/                                 # Galería de fondos y texturas
│   ├── logos/                                      # Iconos oficiales (Google, FB, MarketFlex)
│   └── ...                                         # Isotipos y logotipos oficiales
├── tests/                                          # Pruebas de Sistema (End-to-End)
│   └── example.spec.ts                             # Suite de pruebas con Playwright
├── src/
│   ├── components/                                 # Componentes de UI (Arquitectura de Islas)
│   │   ├── auth/                                   # UI de Autenticación (Social Buttons)
│   │   ├── cart/                                   # Módulo de Carrito (Shopping Cart UI)
│   │   ├── checkout/                               # Proceso de Finalización de Compra
│   │   │   ├── CheckoutForm.tsx                    # Formulario multi-paso de checkout
│   │   │   ├── CheckoutForm.test.tsx               # Test unitario del formulario
│   │   │   ├── CheckoutSummary.tsx                 # Resumen lateral de la orden
│   │   │   ├── CheckoutSummary.test.tsx            # Test unitario del resumen
│   │   │   └── styles/                             # Estilos específicos del checkout
│   │   ├── common/                                 # Componentes transversales (Notificaciones, Modales, Spinner)
│   │   ├── products/                               # Dominio de Productos
│   │   │   ├── FeaturedProducts.astro              # Grilla de destacados para Home
│   │   │   ├── ProductCard.astro                   # Tarjeta individual con efectos premium
│   │   │   ├── ProductCarousel.astro               # Carrusel interactivo reutilizable
│   │   │   ├── ProductDetails.astro                # Ficha técnica del producto
│   │   │   └── FilterModal.astro                   # Modal de filtros avanzados
│   │   └── promotions/                             # Banners y sliders de promociones
│   ├── layouts/                                    # Estructuras de página base
│   │   ├── Navbar.astro                            # Navegación jerárquica con buscador
│   │   ├── Footer.astro                            # Pie de página responsivo
│   │   └── Layout.astro                            # Wrapper principal (SEO, Fuentes, Scripts)
│   ├── lib/                                        # Configuración de librerías externas
│   │   └── api.ts                                  # Cliente Ky con interceptor de Auto-Refresh JWT
│   ├── scripts/                                    # Lógica interactiva (Extracto de .astro)
│   │   ├── auth-login.ts                           # Manejo de tokens y SDKs sociales
│   │   ├── auth-login.test.ts                      # Test: Login Workflow
│   │   ├── auth-register.ts                        # Registro con reCAPTCHA v3
│   │   ├── auth-register.test.ts                   # Test: Registration Workflow
│   │   ├── navbar.ts                               # Lógica de búsqueda y menús
│   │   ├── navbar.test.ts                          # Test: Navigation & Unified Search
│   │   ├── carousel.ts                             # Motor de carruseles premium
│   │   ├── carousel.test.ts                        # Test: Carousel Mechanics
│   │   ├── profile.ts                              # Lógica de perfil de usuario
│   │   ├── profile.test.ts                         # Test: Profile & Session management
│   │   ├── promotion-hero.ts                       # Banner dinámico de promociones
│   │   ├── promotion-hero.test.ts                  # Test: Hero Slider Logic
│   │   ├── search-filters.ts                       # Gestión de estados de filtros
│   │   └── search-filters.test.ts                  # Test: Filter Modal UI
│   ├── services/                                   # Capa de API y Pruebas Unitarias
│   │   ├── auth.service.ts                         # Login, Registro y Logout
│   │   ├── product.service.ts                      # Catálogo, Búsqueda y Detalle
│   │   ├── brand.service.ts                        # Listado de marcas/editoriales
│   │   ├── brand.service.test.ts                   # Test unitario de marcas
│   │   ├── category.service.ts                     # Árbol de categorías
│   │   ├── category.service.test.ts                # Test unitario de categorías
│   │   ├── filter.service.ts                       # Lógica de normalización de filtros
│   │   ├── filter.service.test.ts                  # Test unitario de filtros
│   │   └── support.service.ts                      # Enlace con soporte/contacto
│   ├── store/                                      # Gestión de Estado Centralizada (Nanostores)
│   │   ├── cartStore.ts                            # Persistencia y lógica base del carrito
│   │   ├── checkoutStore.ts                        # Coordinación y lógica de la compra
│   │   └── promotionEngine.ts                      # Motor de cálculo de descuentos complejo
│   ├── types/                                      # Tipado estricto del dominio
│   │   ├── auth.types.ts                           # Interfaces de sesión
│   │   ├── product.types.ts                        # Esquema de producto y atributos
│   │   ├── purchase.types.ts                       # Tipos para compras y envíos
│   │   ├── category.types.ts                       # Interfaces de categorías/subcategorías
│   │   ├── common.types.ts                         # Paginación y respuestas genéricas
│   │   └── user.types.ts                           # Perfil y roles de usuario
│   ├── pages/                                      # Rutas y Vistas (SSR)
│   │   ├── admin/                                  # Panel privado de gestión
│   │   ├── productos/                              # Rutas dinámicas de producto ([id].astro)
│   │   ├── index.astro                             # Landing page principal
│   │   ├── search.astro                            # Dashboard de búsqueda y resultados
│   │   ├── login.astro                             # Autenticación de usuario
│   │   ├── profile.astro                           # Mi Perfil (User Dashboard)
│   │   └── ...                                     # FAQ, Contacto, Términos, Novedades
│   ├── styles/                                     # Estilos globales y tokens neón
│   └── env.d.ts                                    # Definiciones de tipos para env vars
├── .env                                            # Variables de entorno (API URL, Keys)
├── .gitignore                                      # Exclusiones de Git
├── astro.config.mjs                                # Configuración de Astro (React, mkcert)
├── package.json                                    # Metadatos y scripts (pnpm)
├── pnpm-lock.yaml                                  # Árbol de dependencias exacto
├── README.md                                       # Documentación del proyecto
└── tsconfig.json                                   # Configuración de TypeScript
</code></pre>

<hr>

<h2>📚 Skills y Directrices</h2>
<p>Este proyecto se rige por un conjunto de reglas arquitectónicas y de calidad de código denominadas <b>Skills</b>. Podés consultar el catálogo completo en:</p>
<ul>
    <li><b><a href=".agent/skills/global-skills/SKILL.md">Global Skills Catalog (Frontend)</a></b></li>
    <li><b><a href=".agent/skills/test-enforcement/SKILL.md">Test Enforcement Rule</a></b></li>
</ul>
<p>Las directrices más críticas incluyen:</p>
<ul>
    <li><code>css-modules</code>: Todo CSS complejo debe vivir en su propio archivo modular.</li>
    <li><code>test-enforcement</code>: Regla obligatoria de "Un test por archivo" para componentes y servicios.</li>
    <li><code>astro-scripts</code>: La lógica compleja de scripts debe extraerse de los archivos Astro.</li>
</ul>

<hr>

<h2>🧪 Testing y Calidad</h2>
<p>
  El frontend implementa una estrategia dual de pruebas para asegurar tanto la lógica interna como la experiencia del usuario final.
</p>
<ul>
  <li><b>Pruebas de Lógica & Infraestructura:</b> <a href="https://vitest.dev/">Vitest</a> + Happy DOM + MSW para servicios, interceptores de API y scripts interactivos. Cobertura del 100% en <code>src/scripts</code> y <code>src/services</code>.</li>
  <li><b>Verificación de Sesión:</b> Tests específicos para asegurar que el <b>Auto-Refresh</b> de JWT y la inyección de tokens en cada request funcionen correctamente.</li>
  <li><b>Pruebas E2E (Punta a Punta):</b> <a href="https://playwright.dev/">Playwright</a>. Suite consolidada que valida el flujo completo de negocio: **Login → Descubrimiento de Producto → Carrito → Checkout**.</li>
</ul>

<h3>Comandos de Test</h3>
<pre>
# Ejecutar tests unitarios (Servicios y Scripts)
pnpm test
# Ejecutar suite E2E completa (Headed)
pnpm run test:e2e
# Abrir entorno interactivo de Playwright
pnpm run test:e2e:ui
</pre>

<hr>

<h2>📜 Comandos Disponibles</h2>
<p>En el directorio del proyecto, puedes ejecutar los siguientes comandos:</p>
<ul>
    <li><code>pnpm dev</code>: Inicia el servidor de desarrollo en <code>localhost:2611</code> (incluye HTTPS local con <code>mkcert</code>).</li>
    <li><code>pnpm build</code>: Compila la aplicación para producción. Optimiza todos los recursos y finaliza la construcción SSR (Server-Side Rendering).</li>
    <li><code>pnpm preview</code>: Levanta un servidor Node local para visualizar la versión compilada de producción antes de desplegarla.</li>
</ul>

<hr>

<h2>🔐 Variables de Entorno</h2>
<p>Crea un archivo <code>.env</code> en la raíz del proyecto con las siguientes variables:</p>
<pre>
PORT=2611
PUBLIC_API_URL=http://localhost:5979/api
PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
PUBLIC_FACEBOOK_APP_ID=your_facebook_app_id
PUBLIC_RECAPTCHA_SITE_KEY=your_recaptcha_site_key
</pre>

<h2>🚀 Instalación</h2>
<pre>
git clone https://github.com/agussantinelli/MarketFlex-FrontEnd.git
cd MarketFlex-FrontEnd
pnpm install
pnpm dev
</pre>

<hr>

<h2 align="left">⚖️ Licencia y Propiedad Intelectual</h2>

<p align="left">
  Este proyecto es <b>propiedad intelectual privada</b> de Agustín Santinelli. No se otorga ninguna licencia de uso abierto. Puedes consultar los términos detallados en el archivo 
  <a href="LICENSE"><code>LICENSE</code></a> incluido en este repositorio.
</p>

<p align="left">
  <i>
    ⚠️ <b>Restricción Firme:</b> Queda terminantemente prohibida la copia, reproducción, distribución o modificación de este código sin autorización expresa del autor. Este repositorio se publica exclusivamente como exhibición de portafolio profesional.
  </i>
</p>
<hr />

<h2 align="left">🚫 Copyright Total</h2>

<p align="left">
  Este proyecto es propiedad intelectual exclusiva de <b>Agustín Santinelli</b>. No se aceptan contribuciones externas o forks para su uso público sin previo acuerdo por escrito.
</p>

<p align="left">
  Si tienes sugerencias directas o deseas explorar colaboraciones comerciales, por favor contacta al autor: 
  <a href="mailto:agustinsantinelli@gmail.com">agustinsantinelli@gmail.com</a>.
</p>

<hr />

<p align="center">
  Desarrollado con mucho ❤️ y 🧉 por <a href="https://github.com/agussantinelli">Agus Santinelli</a>
</p>
