---
import Layout from "../../layouts/Layout.astro";
import { Icon } from "astro-icon/components";
import PageCard from "../../components/common/PageCard.astro";
import styles from "./styles/dashboard.module.css";

// Mocked Data
const stats = [
    {
        title: "Ingresos Totales",
        value: "$152,450",
        trend: "+12.5%",
        icon: "lucide:dollar-sign",
        color: "from-green-500 to-green-300",
    },
    {
        title: "Ventas Totales",
        value: "1,245",
        trend: "+8.2%",
        icon: "lucide:shopping-cart",
        color: "from-blue-500 to-blue-300",
    },
    {
        title: "Ticket Promedio",
        value: "$122.45",
        trend: "+2.1%",
        icon: "lucide:trending-up",
        color: "from-purple-500 to-purple-300",
    },
    {
        title: "Usuarios Activos",
        value: "842",
        trend: "+15.3%",
        icon: "lucide:users",
        color: "from-yellow-500 to-yellow-300",
    },
];

const recentOrders = [
    {
        id: "#ORD-7821",
        user: "Laurent Mekies",
        date: "19 Feb, 2026",
        amount: "$350.00",
        status: "Completado",
    },
    {
        id: "#ORD-7820",
        user: "Max Verstappen",
        date: "19 Feb, 2026",
        amount: "$120.50",
        status: "Procesando",
    },
    {
        id: "#ORD-7819",
        user: "Lewis Hamilton",
        date: "18 Feb, 2026",
        amount: "$85.00",
        status: "Completado",
    },
    {
        id: "#ORD-7818",
        user: "Charles Leclerc",
        date: "18 Feb, 2026",
        amount: "$420.00",
        status: "Cancelado",
    },
    {
        id: "#ORD-7817",
        user: "Fernando Alonso",
        date: "17 Feb, 2026",
        amount: "$210.00",
        status: "Completado",
    },
];
---

<Layout title="MarketFlex | Admin Dashboard">
    <PageCard maxWidth="1400px" variant="dark">
        <div class={styles.dashboardContainer}>
            <header class={styles.dashboardHeader}>
                <div>
                    <h1>Panel Administrativo</h1>
                    <p>Resumen de actividad y m√©tricas clave.</p>
                </div>
                <div class={styles.headerActions}>
                    <button class={styles.btnSecondary}>
                        <Icon name="lucide:download" /> Exportar
                    </button>
                    <button class={styles.btnPrimary}>
                        <Icon name="lucide:plus" /> Nuevo Producto
                    </button>
                </div>
            </header>

            <!-- Stats Grid -->
            <div class={styles.statsGrid}>
                {
                    stats.map((stat) => (
                        <div class={styles.statCard}>
                            <div
                                class={`${styles.statIconWrapper} bg-gradient-to-br ${stat.color}`}
                            >
                                <Icon
                                    name={stat.icon}
                                    class={styles.statIcon}
                                />
                            </div>
                            <div class={styles.statInfo}>
                                <h3>{stat.title}</h3>
                                <div class={styles.statValue}>{stat.value}</div>
                                <span
                                    class={`${styles.statTrend} ${styles.positive}`}
                                >
                                    <Icon name="lucide:arrow-up-right" />{" "}
                                    {stat.trend}
                                </span>
                            </div>
                        </div>
                    ))
                }
            </div>

            <!-- Recent Activity -->
            <div class={styles.recentActivity}>
                <div class={styles.sectionHeader}>
                    <h2>Transacciones Recientes</h2>
                    <a href="#" class={styles.viewAll}>Ver todas</a>
                </div>

                <div class={styles.tableContainer}>
                    <table class={styles.table}>
                        <thead>
                            <tr>
                                <th>ID Orden</th>
                                <th>Usuario</th>
                                <th>Fecha</th>
                                <th>Monto</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            {
                                recentOrders.map((order) => (
                                    <tr>
                                        <td class={styles.orderId}>
                                            {order.id}
                                        </td>
                                        <td class={styles.userCell}>
                                            <div class={styles.userAvatar}>
                                                {order.user.charAt(0)}
                                            </div>
                                            {order.user}
                                        </td>
                                        <td>{order.date}</td>
                                        <td class={styles.amount}>
                                            {order.amount}
                                        </td>
                                        <td>
                                            <span
                                                class={
                                                    styles[
                                                        order.status.toLowerCase()
                                                    ]
                                                }
                                            >
                                                {order.status}
                                            </span>
                                        </td>
                                    </tr>
                                ))
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </PageCard>
</Layout>
