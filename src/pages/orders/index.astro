---
import Layout from "../../layouts/Layout.astro";
import { HiShoppingBag, HiMagnifyingGlass } from "react-icons/hi2";
import styles from "./styles/orders-list.module.css";
---

<Layout title="Mis Compras | MarketFlex">
    <main class={styles.ordersContainer}>
        <header class={styles.ordersHeader}>
            <h1 class={styles.ordersTitle}>Mis Compras</h1>
            <p class={styles.ordersSubtitle}>
                Historial completo de tus transacciones y pedidos.
            </p>
        </header>

        <div id="orders-content">
            <!-- Loading State -->
            <div class={styles.emptyOrders} id="orders-loading">
                <div class={styles.spinnerPremium}></div>
                <p class={styles.emptyText}>Cargando tu historial...</p>
            </div>

            <!-- Empty State -->
            <div
                class={styles.emptyOrders}
                id="orders-empty"
                style="display: none;"
            >
                <HiShoppingBag className={styles.emptyIcon} />
                <h2 class={styles.emptyTitle}>Aún no tienes compras</h2>
                <p class={styles.emptyText}>
                    Explora nuestro catálogo y realiza tu primera compra para
                    verla aquí.
                </p>
                <a href="/search?explore=true" class={styles.btnShop}>
                    <HiMagnifyingGlass />
                    Explorar Productos
                </a>
            </div>

            <!-- List State -->
            <div
                class={styles.ordersList}
                id="orders-list"
                style="display: none;"
            >
                <!-- Filled dynamically by JS -->
            </div>
        </div>
    </main>
</Layout>

<script define:vars={{ styles }}>
    import { initOrdersList } from "../../scripts/orders-list";

    // Initialize
    initOrdersList(styles);

    // Support View Transitions
    document.addEventListener("astro:page-load", () => initOrdersList(styles));
</script>
