---
import Layout from "../../layouts/Layout.astro";
import { HiShoppingBag, HiMagnifyingGlass } from "react-icons/hi2";
import "./styles/orders.css";
---

<Layout title="Mis Compras | MarketFlex">
    <main class="orders-container">
        <header class="orders-header">
            <h1 class="orders-title">Mis Compras</h1>
            <p class="orders-subtitle">
                Historial completo de tus transacciones y pedidos.
            </p>
        </header>

        <div id="orders-content">
            <!-- Loading State -->
            <div class="empty-orders" id="orders-loading">
                <div class="spinner-premium"></div>
                <p class="empty-text">Cargando tu historial...</p>
            </div>

            <!-- Empty State -->
            <div class="empty-orders" id="orders-empty" style="display: none;">
                <HiShoppingBag className="empty-icon" />
                <h2 class="empty-title">Aún no tienes compras</h2>
                <p class="empty-text">
                    Explora nuestro catálogo y realiza tu primera compra para
                    verla aquí.
                </p>
                <a href="/search?explore=true" class="btn-shop">
                    <HiMagnifyingGlass />
                    Explorar Productos
                </a>
            </div>

            <!-- List State -->
            <div class="orders-list" id="orders-list" style="display: none;">
                <!-- Filled dynamically by JS -->
            </div>
        </div>
    </main>
</Layout>

<style>
    .spinner-premium {
        width: 50px;
        height: 50px;
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        border-top-color: #fff;
        margin: 0 auto 1.5rem;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }
</style>

<script>
    import { initOrdersList } from "../../scripts/orders-list";

    // Initialize
    initOrdersList();

    // Support View Transitions
    document.addEventListener("astro:page-load", initOrdersList);
</script>
